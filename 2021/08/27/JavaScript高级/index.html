<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JS高级 | Hexo</title><meta name="keywords" content="JS"><meta name="author" content="ercury"><meta name="copyright" content="ercury"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ES6中的类和对象创建类和对象&#x3D;&#x3D;创建类&#x3D;&#x3D; 123class name &amp;#123;  &#x2F;&#x2F; calss body&amp;#125;  &#x3D;&#x3D;创建实例(对象)&#x3D;&#x3D; 1var xx &#x3D; new name()   类constructor构造函数construtor()方法是类的构造函数(默认方法),用于传递参数,返回实例对象,通过new命令生成对象实例时,自动调用该方法,如果没有显示定义,类内部会自动">
<meta property="og:type" content="article">
<meta property="og:title" content="JS高级">
<meta property="og:url" content="http://example.com/2021/08/27/JavaScript%E9%AB%98%E7%BA%A7/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="ES6中的类和对象创建类和对象&#x3D;&#x3D;创建类&#x3D;&#x3D; 123class name &amp;#123;  &#x2F;&#x2F; calss body&amp;#125;  &#x3D;&#x3D;创建实例(对象)&#x3D;&#x3D; 1var xx &#x3D; new name()   类constructor构造函数construtor()方法是类的构造函数(默认方法),用于传递参数,返回实例对象,通过new命令生成对象实例时,自动调用该方法,如果没有显示定义,类内部会自动">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2021-08-26T17:23:14.019Z">
<meta property="article:modified_time" content="2022-02-03T10:34:11.442Z">
<meta property="article:author" content="ercury">
<meta property="article:tag" content="JS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/08/27/JavaScript%E9%AB%98%E7%BA%A7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JS高级',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-03 18:34:11'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/author.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hexo</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JS高级</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-26T17:23:14.019Z" title="发表于 2021-08-27 01:23:14">2021-08-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-03T10:34:11.442Z" title="更新于 2022-02-03 18:34:11">2022-02-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/JS/">JS</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JS高级"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><span id="more"></span>

<h2 id="ES6中的类和对象"><a href="#ES6中的类和对象" class="headerlink" title="ES6中的类和对象"></a>ES6中的类和对象</h2><h3 id="创建类和对象"><a href="#创建类和对象" class="headerlink" title="创建类和对象"></a>创建类和对象</h3><p>==创建类==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">name</span> </span>&#123;</span><br><span class="line">  <span class="comment">// calss body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==创建实例(对象)==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xx = <span class="keyword">new</span> name()</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="类constructor构造函数"><a href="#类constructor构造函数" class="headerlink" title="类constructor构造函数"></a>类constructor构造函数</h3><p><font color=red>construtor()</font>方法是类的构造函数(默认方法),<font color=red>用于传递参数,返回实例对象</font>,通过new命令生成对象实例时,自动调用该方法,如果没有显示定义,类内部会自动给我们创建一个<font color=red>construtor()</font></p>
<hr>
<h3 id="类添加方法"><a href="#类添加方法" class="headerlink" title="类添加方法"></a>类添加方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">construtor</span>(<span class="params">name,age</span>)</span> &#123; <span class="comment">//constructor 构造器(构造函数)</span></span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name+<span class="string">&#x27;你好&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h3><p>子类可以继承父类的一些属性和方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==super关键字==</p>
<p><font color=red>super关键字</font>用于访问和调用对象父级上的函数.<font color=red>可以调用父级的构造函数</font>,也可以调用父级的普通函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">surname</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.surname = surname;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">surname,firstname</span>)</span> &#123;</span><br><span class="line">     <span class="built_in">super</span>(surname);  <span class="comment">//调用父类的surname属性 </span></span><br><span class="line">     <span class="built_in">this</span>.firstname = firstanme; <span class="comment">//定义子类独有的属性</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color=red>注意:子类在构造函数中使用super,必须放到this前面(必须先调用父类的构造方法,在使用子类构造方法)</font></p>
<p>==三个注意点==</p>
<ol>
<li>在ES6中类没有变量提升,所以必须先定义类,才能通过类实例化对象</li>
<li>类里面的共有属性和方法一定要加this使用(this指向当前实例化对象)</li>
<li>constructor里面的this执行实例对象,方法里面的this指向这个方法的调用者</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;button&gt;点击&lt;/button&gt;</span><br><span class="line"><span class="keyword">var</span> that;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Star</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">construtor</span>(<span class="params">uname,age</span>)</span> &#123;</span><br><span class="line">    that = <span class="built_in">this</span>;</span><br><span class="line">    <span class="built_in">this</span>.uname = uname;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.sing(); <span class="comment">//想要一实例化对象就调用该函数 方法前加this</span></span><br><span class="line">    <span class="built_in">this</span>.btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">    <span class="built_in">this</span>.btn.onclick = <span class="built_in">this</span>.sing; <span class="comment">//这里sing不能加() 因为sing本身就是个函数 </span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">sing</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//这个sing方法里的this,指向的是btn这个按钮,因为btn调用了它</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.uname); <span class="comment">//共有属性加this  输出undefind 因为btn里没有uname属性</span></span><br><span class="line">  <span class="built_in">console</span>.log(that.uanme); <span class="comment">//that里面存储的是constructor里的this 输出刘德华</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">dance</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//这个dance里面的this指向的是实例对象ldh 因为实例对象ldh调用了它</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;刘德华&#x27;</span>);</span><br><span class="line">ldh.dance();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="构造函数-amp-原型"><a href="#构造函数-amp-原型" class="headerlink" title="构造函数&amp;原型"></a>构造函数&amp;原型</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>在典型的OOP的语言中（如Java),都存在类的概念,类就是对象的模板,对象就是类的实例，但在ES6之前，JS中并没用引入类的概念。</p>
<p>ES6，全称ECMAScript6.0，2015.06发版。但是目前浏览器的JavaScript是ES5版本，大多数高版本的浏览器也支持ES6，不过只实现了ES6的部分特性和功能。</p>
<p>在ES6之前,对象不是基于类创建的,而是用一种称为<font color=red>构造函数</font>的特殊函数来定义对象和它们的特征。</p>
<p>创建对象的三种方式:</p>
<ol>
<li>对象字面量</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>new Object()</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">obj.name = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">obj.age = <span class="number">13</span>;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>自定义构造函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">uname,age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.uname = uname;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">  <span class="built_in">this</span>.sing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我会唱歌&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> star1 = <span class="keyword">new</span> Star(<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;34&#x27;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>构造函数是一种特殊的函数，主要用来初始化对象，即为对象成员变量赋初始值，它总与new一起使用。我们可以把对象中一些公共的属性和方法抽取出来，然后封装到这个函数里面。</p>
<p><strong>在JS中,使用构造函数时要注意以下两点：</strong></p>
<ol>
<li>构造函数用于创建某一类对象，其首字母要大写</li>
<li>构造函数要和new一起使用才有意义</li>
</ol>
<p><strong>new在执行时会做四件事情:</strong></p>
<ol>
<li>在内存中创建一个新的空对象</li>
<li>让this指向这个新的对象</li>
<li>指向构造函数里面的代码,给这个新对象添加属性和方法</li>
<li>返回这个新对象(所有构造函数里面不许哟啊return)</li>
</ol>
<hr>
<h4 id="实例成员-amp-静态成员"><a href="#实例成员-amp-静态成员" class="headerlink" title="实例成员&amp;静态成员"></a>实例成员&amp;静态成员</h4><p>JavaScript的构造函数中可以添加一些成员,可以在构造函数本身添加,也可以在构造函数内部的this上添加.通过这两种方式添加的成员,就分别称为<font color=red>实例成员</font>和<font color=red>静态成员</font></p>
<ul>
<li><p>实例成员:在构造函数内部创建的对象成员称为<font color=red>实例成员,只能由实例化对象来访问</font></p>
</li>
<li><p>静态成员:在构造函数本身上添加的成员称为<font color=red>静态成员,只能由构造函数本身访问</font></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.uname=uname; <span class="comment">//实例成员</span></span><br><span class="line">  <span class="built_in">this</span>.age = age;  <span class="comment">//实例成员</span></span><br><span class="line">  <span class="built_in">this</span>.sing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  <span class="comment">//实例成员</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;我会唱歌&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star(<span class="string">&#x27;刘德华&#x27;</span>,<span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ldh.uanme); <span class="comment">//实例成员只能通过实例化对象访问</span></span><br><span class="line"></span><br><span class="line">Star.sex = <span class="string">&#x27;男&#x27;</span>; <span class="comment">//静态成员</span></span><br><span class="line"><span class="built_in">console</span>.log(Star.sex); <span class="comment">//静态成员只能通过构造函数来访问</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="构造函数的问题"><a href="#构造函数的问题" class="headerlink" title="构造函数的问题"></a>构造函数的问题</h4><p>构造函数方法很好用,但是<font color=red>存在浪费内存的问题</font>(因为构造函数里面存在函数这种复杂数据类型,所以每次实例化对象,都会在内存中重新开辟内存空间)</p>
<p>![image-20210827040751081](/Users/stefan/Library/Application Support/typora-user-images/image-20210827040751081.png)</p>
<p><font color=red>我们希望所有的对象使用同一个函数,这样就比较节省内存</font></p>
<hr>
<h4 id="构造函数原型prototype"><a href="#构造函数原型prototype" class="headerlink" title="构造函数原型prototype"></a>构造函数原型prototype</h4><p>==构造函数通过原型分配的函数(构造函数里的方法)是所有对象所共享的==(所以每次实例化对象不会重新开辟新的内存空间)</p>
<p>JavaScript规定,<font color=red>每一个构造函数都有一个prototype属性</font>指向另一个对象,注意这个prototype就是一个对象,这个对象的所有属性和方法,都会被构造函数所拥有</p>
<p>==原型是什么==?</p>
<p>原型是构造函数的一个属性,它是一个对象,我们称它为<font color=red>原型对象</font></p>
<p>==原型的主要作用是什么==?</p>
<p>共享方法,通过构造函数实例化对象不需要在开辟新的内存空间了</p>
<p>一般情况下,我们的公共属性定义到构造函数里面,公共的方法我们放到原型对象身上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">  Star.prototype.sing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  <span class="comment">//把构造函数里的方法放到原型对象里</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我会唱歌&#x27;</span>);       </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="对象原型-proto"><a href="#对象原型-proto" class="headerlink" title="对象原型__proto__"></a>对象原型<code>__proto__</code></h4><p><font color=red>对象都会有一个属性<code>__proto__</code></font>指向构造函数的prototype原型对象,之所以我们对象可以使用构造函数prototype原型对象的属性和方法,就是因为对象有<code>__proto__</code>的存在</p>
<ul>
<li><code>__proto__</code>对象原型和原型对象prototype是等价的</li>
<li>方法查找规则:首先看实例对象身上是否有sing方法,如果有就执行这个对象上的sing,如果没有,那么因为有<code>__proto__</code>的存在,就去构造函数原型对象prototype身上去查找sing这个方法</li>
</ul>
<p>![image-20210827063226350](/Users/stefan/Library/Application Support/typora-user-images/image-20210827063226350.png)</p>
<hr>
<h4 id="constructor构造函数"><a href="#constructor构造函数" class="headerlink" title="constructor构造函数"></a>constructor构造函数</h4><p><font color=red>对象原型(<strong>proto</strong>)</font>和<font color=red>构造函数(prototype)原型对象</font>里面都有一个==属性==constructor属性,constructor我们称为构造函数,因为它指回构造函数本身</p>
<p>constructor主要用于记录该对象引用于哪个构造函数,它可以让原型对象重新指向原来的构造函数</p>
<p><font color=red>很多情况下,我们需要手动的利用constructor这个属性指回原来的构造函数</font></p>
<p>==当我们将多个方法以下面这种方式同时存储到prototype对象里 prototype对象和–proto–里的constructor属性将会被覆盖(将没有该属性)==,我们没有办法指回原来的构造函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name=name;</span><br><span class="line">  <span class="built_in">this</span>.age=age;</span><br><span class="line">&#125;</span><br><span class="line">Star.prototype = &#123;</span><br><span class="line">  <span class="attr">sing</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">  <span class="attr">move</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star();</span><br><span class="line"><span class="built_in">console</span>.log(Star.prototype); <span class="comment">// 没有了constructor属性</span></span><br><span class="line"><span class="built_in">console</span>.log(ldh.__proto__); <span class="comment">// 没有了constructor属性</span></span><br></pre></td></tr></table></figure>

<p>==问题解决==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name=name;</span><br><span class="line">  <span class="built_in">this</span>.age=age;</span><br><span class="line">&#125;</span><br><span class="line">Star.prototype = &#123;</span><br><span class="line">  <span class="attr">constructor</span>: Star,  <span class="comment">//手动指回</span></span><br><span class="line">  <span class="attr">sing</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">  <span class="attr">move</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ldh = <span class="keyword">new</span> Star();</span><br><span class="line"><span class="built_in">console</span>.log(Star.prototype); <span class="comment">// 可以看到constructor属性</span></span><br><span class="line"><span class="built_in">console</span>.log(ldh.__proto__); <span class="comment">// 可以看到constructor属性</span></span><br><span class="line"><span class="built_in">console</span>.log(Star.prototype.constructor); <span class="comment">//输出Star 构造函数 </span></span><br><span class="line"><span class="built_in">console</span>.log(ldh.__proto__.constructor); <span class="comment">// 输出Star 构造函数 </span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="构造函数-实例-原型对象关系"><a href="#构造函数-实例-原型对象关系" class="headerlink" title="构造函数,实例,原型对象关系"></a>构造函数,实例,原型对象关系</h4><p>![image-20210827070429621](/Users/stefan/Library/Application Support/typora-user-images/image-20210827070429621.png)</p>
<hr>
<h4 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h4><p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/%E5%8E%9F%E5%9E%8B%E9%93%BE.png" alt="原型链"></p>
<p><code>--proto--指向构造函数的prototype原型对象</code>,通过原型对象我们可以找到它某个实例来自哪个构造函数(顺着原型链查找)</p>
<hr>
<h4 id="JS成员查找机制-规则"><a href="#JS成员查找机制-规则" class="headerlink" title="JS成员查找机制(规则)"></a>JS成员查找机制(规则)</h4><ol>
<li>当访问一个对象的属性(包括方法)时,首先查找这个<font color=red>对象自身有没有该属性或方法</font></li>
<li>如果没有就查找它的原型(也就是<code>__proto__</code>指向的<font color=red>prototype原型对象</font>);</li>
<li>如果还没有就查找原型对象的原型(<font color=red>Object原型对象</font>)</li>
<li>以此类推一直找到Object为止(<font color=red>null</font>l)</li>
</ol>
<hr>
<h4 id="原型对象prototype的this指向"><a href="#原型对象prototype的this指向" class="headerlink" title="原型对象prototype的this指向"></a>原型对象prototype的this指向</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name=name;</span><br><span class="line">  <span class="built_in">this</span>.age=age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> that;</span><br><span class="line">Stat.prototype = &#123;</span><br><span class="line">  <span class="attr">constructor</span>: Stat,</span><br><span class="line">  sing <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  that = <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> shili = <span class="keyword">new</span> Star();</span><br><span class="line">shili.sing();</span><br><span class="line"><span class="built_in">console</span>.log(that===shili); <span class="comment">//输出true </span></span><br><span class="line"><span class="comment">//原型对象函数里面的this指向的是 实例对象</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="原型对象的应用"><a href="#原型对象的应用" class="headerlink" title="原型对象的应用"></a>原型对象的应用</h4><p>==扩展内置对象方法==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   <span class="comment">//求和方法</span></span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="built_in">this</span>.length; i++) &#123;</span><br><span class="line">    sum+= <span class="built_in">this</span>[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">//Array的实例对象</span></span><br><span class="line">conlose.log(arr.sum()); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p><font color=red>注意:数组和字符串内置对象不能给原型对象覆盖操作Array.prototype = {},只能是Array.prototype.xxx = function() { }</font></p>
<hr>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>ES6之前并没有给我们提供extends继承,我们可以通过<font color=red>构造函数+原型对象</font>模拟继承,被称为<font color=red>组合继承</font></p>
<h3 id="call"><a href="#call" class="headerlink" title="call()"></a>call()</h3><p>调用这个函数,并且修改函数运行是的this指向</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x,y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>,<span class="number">1</span>); <span class="comment">//this指向window  输出2</span></span><br><span class="line">fn.call(obj,<span class="number">1</span>,<span class="number">1</span>) <span class="comment">//this指向obj 输出2 </span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="借用构造函数继承父类型属性"><a href="#借用构造函数继承父类型属性" class="headerlink" title="借用构造函数继承父类型属性"></a>借用构造函数继承父类型属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name,age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name,age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.score = score; <span class="comment">//子构造函数自己的属性</span></span><br><span class="line">    Father.call(<span class="built_in">this</span>,name,age); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son(<span class="string">&#x27;张三&#x27;</span>,<span class="number">19</span>);</span><br><span class="line"><span class="built_in">console</span>.log(son);</span><br></pre></td></tr></table></figure>

<p>==核心原理==:通过call()把父类型的this指向子类型的this,这样就可以实现子类型继承父类型的属性</p>
<hr>
<h3 id="借助原型对象继承方法"><a href="#借助原型对象继承方法" class="headerlink" title="借助原型对象继承方法"></a>借助原型对象继承方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name,age</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name,age</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">Son.prototype = <span class="keyword">new</span> Father();</span><br><span class="line"><span class="comment">//如果利用对象的形式修改了原型对象,别忘了利用constructor指回原来的构造函数</span></span><br><span class="line">Son.prototype.constructor = Son;</span><br><span class="line"><span class="comment">//这个是只构造函数自己的方法</span></span><br><span class="line">Son.prototype.exam = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ES5新增方法"><a href="#ES5新增方法" class="headerlink" title="ES5新增方法"></a>ES5新增方法</h2><h3 id="数组方法"><a href="#数组方法" class="headerlink" title="数组方法"></a>数组方法</h3><p>==forEach()==:迭代(遍历数组)     map()方法和这个方法差不多  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, [index], [arr]</span>) </span>&#123;&#125;)</span><br><span class="line"><span class="comment">//currentValue:数组当前项的值</span></span><br><span class="line"><span class="comment">//index:数组当前项的索引 可省略</span></span><br><span class="line"><span class="comment">//arr:数组对象本身 可省略</span></span><br><span class="line"><span class="comment">//遇到return  不会终止迭代</span></span><br><span class="line"><span class="comment">//返回值 undefined</span></span><br></pre></td></tr></table></figure>

<p>==filter()==:元素筛选(也是迭代,遍历)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array.filter(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, [index], [arr]</span>)</span>&#123;&#125;)</span><br><span class="line"><span class="comment">//filter()方法创建一个新的数组,新数组中的元素是通过检查特定数组中符合条件的所有元素,主要用于筛选数组</span></span><br><span class="line"><span class="comment">//*它直接返回一个新数组</span></span><br><span class="line"><span class="comment">//currentValue:数组当前项的值</span></span><br><span class="line"><span class="comment">//index:数组当前项的索引 可省略</span></span><br><span class="line"><span class="comment">//arr:数组对象本身 可省略</span></span><br><span class="line"><span class="comment">//遇到return  不会终止迭代</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">23</span>,<span class="number">45</span>,<span class="number">2</span>,<span class="number">56</span>,<span class="number">76</span>];</span><br><span class="line"><span class="keyword">var</span> newArr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">ele,index</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ele &gt; <span class="number">30</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(newArr); <span class="comment">//[45,,56,76]</span></span><br></pre></td></tr></table></figure>

<p>==some()==:查找数组中是否有满足条件的元素   every()方法和这个方法差不多</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array.some(<span class="function"><span class="keyword">function</span>(<span class="params">currentValue, [index], [arr]</span>) </span>&#123;&#125;)</span><br><span class="line"><span class="comment">//*它返回一个布尔值,如果找到这个元素,就返回true,找不到就返回false</span></span><br><span class="line"><span class="comment">//如果找到第一个满足条件的元素,者终止循环,不再继续查找</span></span><br><span class="line"><span class="comment">//currentValue:数组当前项的值</span></span><br><span class="line"><span class="comment">//index:数组当前项的索引 可省略</span></span><br><span class="line"><span class="comment">//arr:数组对象本身 可省略</span></span><br><span class="line"><span class="comment">//遇到return true 终止迭代</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">23</span>,<span class="number">46</span>,<span class="number">34</span>,<span class="number">7</span>,<span class="number">86</span>];</span><br><span class="line"><span class="keyword">var</span> flag = arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">50</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(flag); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="字符串方法"><a href="#字符串方法" class="headerlink" title="字符串方法"></a>字符串方法</h3><p>==trim()==:从一个字符串的两端删除空白字符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str.trim()</span><br><span class="line"><span class="comment">//trim()方法不影响字符串本身,它返回的是一个新的字符串</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;   str   &#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> neeStr = str.trim();</span><br><span class="line"><span class="built_in">console</span>.log(newStr); <span class="comment">//str</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = input.value.trim();</span><br><span class="line">  <span class="keyword">if</span>(str === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">    alert(<span class="string">&#x27;请输入内容&#x27;</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(str.length);</span><br><span class="line">    <span class="built_in">console</span>.log(str);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==数组转换为对象==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;啦啦&#x27;</span>,<span class="string">&#x27;呵呵&#x27;</span>,<span class="string">&#x27;哥哥&#x27;</span>,<span class="string">&#x27;嗯嗯&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> obj = &#123;...arr&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(&#123; &#125;,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<p>==对象转换为数组==</p>
<hr>
<h3 id="对象方法"><a href="#对象方法" class="headerlink" title="对象方法"></a>对象方法</h3><p>==Object.keys()==:用于获取对象自身所有属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(obj)</span><br><span class="line"><span class="comment">//效果类似于for...in</span></span><br><span class="line"><span class="comment">//返回一个由属性名组成的数组</span></span><br></pre></td></tr></table></figure>

<p>==Object.defineProperty()==:定义新属性或修改原有属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineproperty(obj,prop,descriptor)</span><br><span class="line"><span class="comment">//obj:目标对象.必需</span></span><br><span class="line"><span class="comment">//prop:需要定义或修改的属性的名字 必需</span></span><br><span class="line"><span class="comment">//descriptor: 目标属性所拥有的特性 必需</span></span><br><span class="line"><span class="comment">//descriptors属性说明: 以对象形式&#123;&#125; 书写</span></span><br><span class="line">descripots &#123;</span><br><span class="line">  <span class="attr">value</span>:设置属性的值 默认为<span class="literal">undefined</span></span><br><span class="line">  <span class="attr">writable</span>:值是否可以重写</span><br><span class="line">  <span class="attr">enumerable</span>:目标属性否可以枚举<span class="literal">true</span>|<span class="literal">false</span> 默认为<span class="literal">false</span> (是否允许被遍历出来) </span><br><span class="line">  <span class="attr">configurable</span>:目标属性是否可以被删除或是否可以在此修改特性<span class="literal">true</span>|<span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ES5函数进阶"><a href="#ES5函数进阶" class="headerlink" title="ES5函数进阶"></a>ES5函数进阶</h2><h3 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h3><p>==自定义函数==(命名函数)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123; &#125;</span><br></pre></td></tr></table></figure>

<p>==函数表达式==(匿名函数)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; &#125;</span><br></pre></td></tr></table></figure>

<p>==new Function()==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;参数1&#x27;</span>,<span class="string">&#x27;参数2&#x27;</span>,<span class="string">&#x27;函数体&#x27;</span>)</span><br><span class="line"><span class="comment">//Function里面的参数都必需是字符串格式</span></span><br><span class="line"><span class="comment">//这种方式执行效率低,也不方便书写,因此比较少用</span></span><br><span class="line"><span class="comment">//所有函数都是Function的实例(对象)</span></span><br><span class="line"><span class="comment">//函数也属于对象</span></span><br></pre></td></tr></table></figure>

<p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89.png" alt="image-20210828035438588"></p>
<hr>
<h3 id="函数的调用"><a href="#函数的调用" class="headerlink" title="函数的调用"></a>函数的调用</h3><p>==普通函数==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">fn();</span><br><span class="line">fn.call();</span><br></pre></td></tr></table></figure>

<p>==对象的方法==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">  <span class="attr">say</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.say();</span><br></pre></td></tr></table></figure>

<p>==构造函数==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">new</span> Star();</span><br></pre></td></tr></table></figure>

<p>==绑定事件绑定==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="comment">//点击调用(事件触发调用)</span></span><br></pre></td></tr></table></figure>

<p>==定时器函数==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; &#125;,<span class="number">1000</span>) </span><br><span class="line"><span class="comment">//这个函数是定时器自动1秒中调用一次</span></span><br></pre></td></tr></table></figure>

<p>==立即执行函数==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; &#125;)()</span><br><span class="line"><span class="comment">//自动调用</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="函数内this的指向"><a href="#函数内this的指向" class="headerlink" title="函数内this的指向"></a>函数内this的指向</h3><ul>
<li>这些this的指向,是当我们调用函数的时候确定的,调用方式的不同决定了this的指向不同</li>
<li>一般指向调用者</li>
</ul>
<table>
<thead>
<tr>
<th>调用方式</th>
<th>this指向</th>
</tr>
</thead>
<tbody><tr>
<td>普通函数调用</td>
<td>window</td>
</tr>
<tr>
<td>构造函数调用</td>
<td>实例对象  原型对象里面的方法也指向实例对象</td>
</tr>
<tr>
<td>对象方法调用</td>
<td>该方法所属对象</td>
</tr>
<tr>
<td>事件绑定方法</td>
<td>绑定事件对象</td>
</tr>
<tr>
<td>定时器函数</td>
<td>window</td>
</tr>
<tr>
<td>立即执行函数</td>
<td>window</td>
</tr>
</tbody></table>
<hr>
<h3 id="改变函数内部this指向"><a href="#改变函数内部this指向" class="headerlink" title="改变函数内部this指向"></a>改变函数内部this指向</h3><p>==call()==: 调用一个函数,可以改变函数的this指向。(多用于继承)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.call(thisArg,参数<span class="number">1</span>,参数<span class="number">2</span>,....)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x,y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>,<span class="number">1</span>); <span class="comment">//this指向window  输出2</span></span><br><span class="line">fn.call(obj,<span class="number">1</span>,<span class="number">1</span>) <span class="comment">//this指向obj 输出2 </span></span><br></pre></td></tr></table></figure>

<p>==apply()==:调用一个函数,简单理解为调用函数的方式,但是他可以改变函数的this指向</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fun.apply(thisArg, [argsArray])</span><br><span class="line"><span class="comment">//thisArg: 在fun函数运行时指定的this值</span></span><br><span class="line"><span class="comment">//argsArray:传递的值,必须包含在数组里</span></span><br><span class="line"><span class="comment">//返回值就是函数的返回值,因为它就是调用函数</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//apply的应用 借助其他对象的方法对数组进行操作 比如:借助数学内置对象求最大值</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>,<span class="number">45</span>,<span class="number">67</span>,<span class="number">789</span>];</span><br><span class="line"><span class="keyword">var</span> max = <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>,arr); <span class="comment">//这里不需要改变this指向,写max的调用者</span></span><br><span class="line"><span class="built_in">console</span>.log(max); <span class="comment">// 789</span></span><br></pre></td></tr></table></figure>

<p>==bind方法==:此方法不会调用函数,但是能改变函数内部this指向</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fun.bind(thisArg, arg1, arg2,...)</span><br><span class="line"><span class="comment">//thisArg: 在妇女函数运行时指定的this值</span></span><br><span class="line"><span class="comment">//arg1、arg2:传递的其他参数</span></span><br><span class="line"><span class="comment">//返回由指定的this值和初始化参数改造的原函数拷贝</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x,y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">fn.bind(obj,<span class="number">1</span>,<span class="number">1</span>) <span class="comment">//this指向改为obj 但不会调用原函数fn</span></span><br><span class="line"><span class="keyword">var</span> f = fn.bind(obj,<span class="number">1</span>,<span class="number">1</span>)  <span class="comment">//会返回一个改变了this指向的新函数</span></span><br><span class="line">f(); <span class="comment">//调用</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">bind应用实例</span><br><span class="line"><span class="comment">//如果有的函数我们不需要立即调用,但又想改变这个函数内部的this指向,此时用bind();</span></span><br><span class="line"><span class="comment">//我们有一个按钮,当我们点击了之后,就禁用这个按钮,3秒后开启这个按钮</span></span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">btn.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.disabled = <span class="literal">true</span>; <span class="comment">//这个this指向 btn这个按钮</span></span><br><span class="line">   <span class="comment">// var that = this; 这样是可以的 但写起来麻烦 并且占内存</span></span><br><span class="line">   <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// this.disabled = false;  这个this指向window window没有disabled属性</span></span><br><span class="line">   <span class="comment">// that.disabled = false; 这样是可以的 但写起来麻烦 并且占内存</span></span><br><span class="line">    &#125;.bind(<span class="built_in">this</span>),<span class="number">3000</span>)</span><br><span class="line">    <span class="comment">// 因为bind()在定时器函数的外面 所以这里的this指向是btn</span></span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h3><h4 id="什么是严格模式"><a href="#什么是严格模式" class="headerlink" title="什么是严格模式"></a>什么是严格模式</h4><p>JavaScript除了提供正常模式外，还提供了严格模式（strict mode）。ES5的严格模式是采用具有限制性JavaScript变体的一种方式，即在严格的条件下运行JS代码。</p>
<p>严格模式在IE10以上版本的浏览器中才会被支持，旧版本浏览器中会被忽略。</p>
<p>严格模式对正常的JavaScript语义做了一些更改：</p>
<p>1.消除了Javascript语法的一些不合理、不严谨之处，减少了一些怪异行为。</p>
<p> 2、消除代码运行的一些不安全之处，保证代码运行的安全。</p>
<p>3.提高编译器效率，增加运行速度。</p>
<p>4.禁用了在ECMAScript的未来版本中可能会定义的一些语法，为未来新版本的Javascript做好铺垫。比如一些保留字如：class，enum，export，extends，import，super不能做变量名</p>
<hr>
<h4 id="开启严格模式"><a href="#开启严格模式" class="headerlink" title="开启严格模式"></a>开启严格模式</h4><p>严格模式可以应用到<font color=red>整个脚本</font>或<font color=red>个别函数</font>中.因此在使用时,我们可以将严格模式分为<font color=red>为脚本开启严格模式</font>和<font color=red>为函数开启严格模式</font>两种情况</p>
<p>==为整个脚本文件开启严格模式==</p>
<ul>
<li>为整个脚本文件开启严格模式,需要<font color=red>在所有语句之前放一个特定语句’use strict’;</font></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="comment">//因为&#x27;use strict&#x27;加了引号,所以老版本的浏览器会把它当作一个普通字符串忽略</span></span><br></pre></td></tr></table></figure>

<ul>
<li>有的script基本还是严格模式,有的script脚本是正常模式,这样不利于文件合并,所以可以将整个脚本文件放在一个立即指向的匿名函数中,这样独立创建一个作用域而不影响其他脚本文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &#x27;use strict&#x27;</span>;</span><br><span class="line">&#125;)()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>==为整个函数开启严格模式==</p>
<ul>
<li>要给某个函数开启严格模式,需要把’<font color=red>use strict’声明放在函数体所在语句之前</font></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &#x27;use strict&#x27;</span>;   <span class="comment">//给函数fn开启严格模式</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;  <span class="comment">//fun函数还是普通模式</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="严格模式中的变化"><a href="#严格模式中的变化" class="headerlink" title="严格模式中的变化"></a>严格模式中的变化</h4><p>==变量规定==</p>
<ol>
<li>在正常模式中,如果一个变量没有声明就赋值,默认是全局变量.严格模式禁止这种用法,变量都必需var命令声明,然后再使用.</li>
<li>我们不能随意删除已经定义好的变量</li>
</ol>
<p>==严格模式下this指向问题==</p>
<ol>
<li>以前在全局作用域函数中的this指向window对象</li>
<li><font color=red>严格模式下全局作用域中函数中的this是undefined</font></li>
<li>以前构造函数时不加new也可以调用,当普通函数,this指向全局对象</li>
<li>严格模式下,如果构造函数不加new调用,this会报错</li>
<li>new实例化的构造函数还是指向创建的实例对象</li>
<li>定时器this还是指向window</li>
<li>事件、对象还是指向调用者</li>
</ol>
<p>==函数变化==</p>
<ol>
<li>不能有重名的参数</li>
<li>函数必须声明在顶层.新版本的JS(ES6)会引入‘块级作用域’.为了与新版本接轨,不允许在非函数的代码块内声明函数</li>
</ol>
<hr>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><p><font color=red>高阶函数</font>是对其他函数进行操作的函数,它<font color=red>接受函数作为参数</font>或<font color=red>将函数作为返回值输出</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  callback&amp;&amp;callback();</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(<span class="string">&#x27;hi&#x27;</span>)&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>

<p>函数也是一种数据类型,同样可以作为参数,传递给另外一个函数使用,最典型的就是作为回调函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b,callback</span>) </span>&#123;  <span class="comment">//fn就是高阶函数</span></span><br><span class="line">  callback&amp;&amp;callback();         </span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;         <span class="comment">//callback作为参数 是回调函数</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我是最后调用的&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>==变量作用域==</p>
<ol>
<li>函数内部可以使用全局变量</li>
<li>函数外部不可以使用局部变量</li>
<li>当函数执行完毕,本作用域内的局部变量会销毁</li>
</ol>
<p>==什么是闭包?==</p>
<p><font color=red>闭包(closure)</font>指有权访问另一个函数作用域中变量的<font color=red>函数</font></p>
<p>简单理解: <font color=red>一个作用域可以访问另一个函数内部的局部变量</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;   <span class="comment">//此时fun函数访问了fn函数作用域内的num变量,产生了闭包fn</span></span><br><span class="line">    <span class="built_in">console</span>.log(num);</span><br><span class="line">  &#125;</span><br><span class="line">  fun();</span><br><span class="line">&#125;</span><br><span class="line">fn(); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>



<p>==闭包的作用==:延伸变量的作用范围</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn(); </span><br><span class="line">f();</span><br></pre></td></tr></table></figure>

<p>==闭包案例1==: 点击小li输出索引号</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通写法</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>;i&lt;lis.length;i++) &#123;</span><br><span class="line">  lis[i].index = i;</span><br><span class="line"> lis[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(index);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//闭包写法</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>;i&lt;lis.length;i++) &#123;</span><br><span class="line">  <span class="comment">//利用for循环创建了4个立即执行函数</span></span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">    lis[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==闭包案例2==:3秒钟后,打印所有小li的内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通写法</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;lis.length; i++ ) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(lis[i].innerHTML); </span><br><span class="line">  &#125;,<span class="number">3000</span>)</span><br><span class="line"> </span><br><span class="line">&#125;   <span class="comment">//这样写是不行的 因为定时器里的回调函数是异步任务,触发了才会执行 for循环是同步任务 同步任务先执行 </span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//闭包写法</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>; i&lt;lis.length; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(lis[i].innerHTML);</span><br><span class="line">    &#125;,<span class="number">3000</span>)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==闭包案例3==:计算打车价格</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> car =  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> start = <span class="number">13</span>;</span><br><span class="line">  <span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">normal</span> : <span class="function"><span class="keyword">function</span>(<span class="params">distance</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span>(distance &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>  total = start;</span><br><span class="line">          &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span>  total = start+(distance-<span class="number">3</span>)*<span class="number">5</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">yd</span>: <span class="function"><span class="keyword">function</span>(<span class="params">flag</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> flag ? total = total + <span class="number">10</span> : total = total;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;)();</span><br><span class="line">  <span class="built_in">console</span>.log(car.normal(<span class="number">6</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(car.yd(<span class="literal">true</span>));</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><p>如果<font color=red>一个函数在内部可以调用其本身</font>,那么这个函数就是<font color=red>递归函数</font></p>
<p>由于递归很容易发生‘栈溢出’错误(stack overflow),所以<font color=red>必须要加退出条件return</font></p>
<p>==递归案例1==:求1~n的阶乘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> n * fn(n - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">8</span>);</span><br></pre></td></tr></table></figure>

<p>==递归案例2==:求斐波那契序列(兔子序列) 1、1、2、3、5、8、13、21….</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户输入一个数字n 就可以求出这个数字对应的兔子序列值</span></span><br><span class="line"><span class="comment">//我们只需要知道用户输入的n前面两项(n-1 n-2)就可以计算出n对应的序列值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fb</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(n===<span class="number">1</span>||n===<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fb(n-<span class="number">1</span>) + fb(n-<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="深拷贝与浅拷贝"><a href="#深拷贝与浅拷贝" class="headerlink" title="深拷贝与浅拷贝"></a>深拷贝与浅拷贝</h3><p>==浅拷贝==:浅拷贝只是拷贝一层,更深层次对象级别的只拷贝引用(地址).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span>,</span><br><span class="line">  <span class="attr">msg</span>: &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> = o &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  o[k] = obj[k];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(o); </span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES6浅拷贝新方法 Object.assign(target,..soures)</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;andy&#x27;</span>,</span><br><span class="line">  <span class="attr">msg</span>: &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(o,obj);</span><br><span class="line"><span class="built_in">console</span>.log(o);</span><br></pre></td></tr></table></figure>

<p>==深拷贝==:拷贝多层,每一级别的数据都会拷贝 改变新对象的值,不会影响原对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">newobj,oldobj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> oldobj) &#123;  </span><br><span class="line">    <span class="comment">//判断我们属性值属于哪种数据类型</span></span><br><span class="line">    <span class="keyword">var</span> item = oldobj[k];</span><br><span class="line">    <span class="comment">//要先判断是否为数组,因为数组也属于O</span></span><br><span class="line">    <span class="keyword">if</span>(item <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">        newobj[k] = [];</span><br><span class="line">        deepCopy(newobj[k],item);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(item <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">        newobj[k] = &#123;&#125;;</span><br><span class="line">        deepCopy(newobj[k],item);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        newobj[k] = item;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> newobj;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h4 id="什么是正则表达式"><a href="#什么是正则表达式" class="headerlink" title="什么是正则表达式"></a>什么是正则表达式</h4><p><font color=red>正则表达式(Refular Expression)</font>是用于匹配字符串中字符组合的模式.在JS中,正则表达式也是对象</p>
<p>正则表通常被用来检索、替换那些符合某个模式（规则）的文本，例如验证表单：用户名表单只能输入英文字母、数字或者下划线，昵称输入框中可以输入中文<font color=red>（匹配）</font>。此外，正则表达式还常用于过滤掉页面内容中的一些敏感词<font color=red>（替换）</font>，或从字符串中获取我们想要的特定部分<font color=red>（提取）</font>等。</p>
<p>其他语言也会使用正则表达式，本阶段我们主要是利用JavaScript正则表达式完成<font color=red>表单验证</font>。</p>
<hr>
<h4 id="正则的特点"><a href="#正则的特点" class="headerlink" title="正则的特点"></a>正则的特点</h4><ol>
<li>灵活性、逻辑性和功能性非常强</li>
<li>可以迅速地极简单的方式达到字符串的复杂控制</li>
<li>验证邮箱:^\w+([-+.]\w+)*@\w+([-.]\w+)<em>.\w+([-.]\w+)</em>$</li>
</ol>
<hr>
<h4 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h4><p>在JS中,可以通过两种方式创建正则表达式</p>
<ul>
<li><strong>通过调用RegExp对象的构造函数创建</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/表达式/</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>通过字面量创建</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="regexp">/表达式/</span>;</span><br></pre></td></tr></table></figure>

<h4 id="测试正则表达式方法"><a href="#测试正则表达式方法" class="headerlink" title="测试正则表达式方法"></a>测试正则表达式方法</h4><p>test()正则对象方法,用于检测字符串是否符合该规则,该对象会返回true或false,其参数是测试字符串.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">regexObj.test(str);</span><br><span class="line"><span class="comment">//regexObj是写的正则表达式</span></span><br><span class="line"><span class="comment">//str我们要检测的文本</span></span><br><span class="line"><span class="comment">//就是检测str文本是否符合我们写的正则表达式</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="正则表达式的组成"><a href="#正则表达式的组成" class="headerlink" title="正则表达式的组成"></a>正则表达式的组成</h4><p>一个正则表达式<font color=red>可以由简单的字符构成</font>,比如/abc/, <font color=red>也可以是简单和特殊字符的组合</font>,比如/ab*c/.其中特殊字符也被称为<font color=red>元字符</font>在正则表达式中式具有<font color=red>特殊</font>意义的专用<font color=red>符号</font>,如^、$、+等</p>
<hr>
<h4 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h4><p>==边界符==</p>
<p>正则表达式中的边界符(位置符)用来<font color=red>提示字符所处的位置</font>,主要有两个字符</p>
<table>
<thead>
<tr>
<th>边界符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>表示匹配行首的文本(以谁开始)</td>
</tr>
<tr>
<td>$</td>
<td>表示匹配捍卫的文本(以谁结束)</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^abc$/</span> <span class="comment">//表示表达式里只能有abc这3个字符</span></span><br><span class="line">rg.test(<span class="string">&#x27;abcabc&#x27;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>==字符类==</p>
<p>[]:表示有一系列字符可供选择,只要匹配其中一个就可以了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/[abc]/</span>; <span class="comment">//只要包含有a 或者b 或者c 都返回true</span></span><br><span class="line">rg.test(<span class="string">&#x27;andy&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;baby&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;color&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;red&#x27;</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[abc]$/</span>; <span class="comment">//三选一 只有三种情况返回true</span></span><br><span class="line">rg.test(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;b&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;c&#x27;</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>-:表示链接</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[a-z]$/</span>; <span class="comment">//只有单个a到z的小写字母返回true</span></span><br></pre></td></tr></table></figure>

<p>==字符组合==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/[a-zA-Z0-9_-]/</span>; <span class="comment">//26个英文字母(大小写都可)数字_和-任何一个字符都返回true</span></span><br></pre></td></tr></table></figure>

<p>==取反==</p>
<p>如果中括号里面有^表示取反(不包含)的意思 千万和边界符^ 别混淆</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[^a-zA-Z0-9_-]/</span>;</span><br></pre></td></tr></table></figure>

<p>==量词符==</p>
<p>量词符用来设定某个模式出现的次数</p>
<table>
<thead>
<tr>
<th>量词</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次  书写的时候n和m之间不能有空格</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^a*$/</span>; <span class="comment">//a可以出现0次或者很多次</span></span><br><span class="line">rg.test(<span class="string">&#x27;&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaaa&#x27;</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+</span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^a+$/</span>; <span class="comment">//a可以出现1次或很多次</span></span><br><span class="line">rg.test(<span class="string">&#x27;&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaaa&#x27;</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?</span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^a?$/</span>; <span class="comment">//a可以出现0次或1次</span></span><br><span class="line">rg.test(<span class="string">&#x27;&#x27;</span>); <span class="comment">//frue</span></span><br><span class="line">rg.test(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaaa&#x27;</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;n&#125;</span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^a&#123;3&#125;$/</span>; <span class="comment">//a重复3次</span></span><br><span class="line">rg.test(<span class="string">&#x27;&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaaa&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaa&#x27;</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;n,&#125;</span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^a&#123;3,&#125;$/</span>; <span class="comment">//a重复3次或3次以上</span></span><br><span class="line">rg.test(<span class="string">&#x27;&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaaa&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaa&#x27;</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;n,m&#125;</span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^a&#123;3,8&#125;$/</span>; <span class="comment">//a重复3次到8次</span></span><br><span class="line">rg.test(<span class="string">&#x27;&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;a&#x27;</span>); <span class="comment">//false</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaaa&#x27;</span>); <span class="comment">//true</span></span><br><span class="line">rg.test(<span class="string">&#x27;aaa&#x27;</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^[a-zA-Z0-9_-]&#123;6,16&#125;$/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>==小括号==:小括号表示优先级</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/^(abc)&#123;3&#125;$/</span>; <span class="comment">//让abc重复3次</span></span><br></pre></td></tr></table></figure>



<hr>
<h4 id="括号总结"><a href="#括号总结" class="headerlink" title="括号总结"></a>括号总结</h4><ol>
<li>大括号 量词符. 里面表示重复次数</li>
<li>中括号 字符集合.匹配方括号中的任意字符</li>
<li>小括号 表示优先级</li>
</ol>
<p>在线测试: <a target="_blank" rel="noopener" href="http://c.runoob.com/">http://c.runoob.com/</a></p>
<hr>
<h4 id="预定义类"><a href="#预定义类" class="headerlink" title="预定义类"></a>预定义类</h4><p>预定义类指的是<font color=red>某些常见模式的简写方式</font></p>
<table>
<thead>
<tr>
<th>预定义类</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>\d</td>
<td>匹配0-9之间的任一数字,相当于[0-9]</td>
</tr>
<tr>
<td>\D</td>
<td>匹配所有0-9以外的字符,相当于 [^ 0-9]</td>
</tr>
<tr>
<td>\w</td>
<td>匹配任意的字母、数字和下划线,相当于 [A-Za-z0-9_]</td>
</tr>
<tr>
<td>\W</td>
<td>除所有字符、数字和下划线以外的字符,相当于[^A-Za-z0-9_]</td>
</tr>
<tr>
<td>\s</td>
<td>匹配空格(包括换行符、制表符、空格符等),相当于[\t\r\v\f]</td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空格的字符,相当于[^\t\r\n\v\f]</td>
</tr>
</tbody></table>
<hr>
<h4 id="正则表达式参数"><a href="#正则表达式参数" class="headerlink" title="正则表达式参数"></a>正则表达式参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/表达式/[<span class="keyword">switch</span>]</span><br><span class="line"><span class="comment">//switch(也称为修饰符)按照什么样的模式来匹配,有三种值</span></span><br><span class="line"><span class="comment">//g: 全局搜索</span></span><br><span class="line"><span class="comment">//i: 忽略大小写</span></span><br><span class="line"><span class="comment">//gi: 全局匹配+忽略大小写</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="replace替换"><a href="#replace替换" class="headerlink" title="replace替换"></a>replace替换</h4><p>replace()方法可以实现替换字符串的操作,用来替换的参数可以是一个字符串伙食一个正则表达式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stringObject.replace(regexp/substr,replacement)</span><br><span class="line"><span class="comment">//第一个参数;被替换的字符串或者正则表达式</span></span><br><span class="line"><span class="comment">//第二个参数替换为的字符串</span></span><br><span class="line"><span class="comment">//返回值是一个替换完毕的新字符串</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><h3 id="ES6新增语法"><a href="#ES6新增语法" class="headerlink" title="ES6新增语法"></a>ES6新增语法</h3><h4 id="let"><a href="#let" class="headerlink" title="let"></a>let</h4><p><strong>作用</strong>:声明变量</p>
<ul>
<li>let声明的变量只在所处的块级作用域有效</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// a is a not defined</span></span><br></pre></td></tr></table></figure>

<p><font color=red>优势:</font></p>
<ol>
<li><p>防止业务比较复杂的时候,作用域内部变量覆盖外部变量</p>
</li>
<li><p>防止循环变量变成全局变量</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">2</span>; i++) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;<span class="number">2</span>; i++) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// i is not defined</span></span><br></pre></td></tr></table></figure>

<p><font color=red>注意:</font>使用let关键字声明的变量才具有块级作用域,使用var声明的变量不具备块级作用域特性</p>
<ul>
<li>使用let关键字声明的变量没有变量提升 (只能先声明再使用)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">// a is a not defined</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用let声明的变量具有暂时性死区特性 (let声明的变量会所在和块级作用域整体绑定)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">//这里的输出语句不会去查找全局作用域里的num变量 num is not defined</span></span><br><span class="line">  <span class="keyword">let</span> num = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="const"><a href="#const" class="headerlink" title="const"></a>const</h4><p>**作用:**声明常量,常量就是值(内存地址)不能变化的量</p>
<ul>
<li>const声明的常量具有块级作用域</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">//a is not defined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>声明常量时必须赋值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PI; <span class="comment">//Missing initializer in const declaration</span></span><br></pre></td></tr></table></figure>

<ul>
<li>常量赋值后,普通数据类型的值不能修改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PI = <span class="number">3.14</span>;</span><br><span class="line">PI = <span class="number">100</span>; <span class="comment">//Assignment to constant variable</span></span><br></pre></td></tr></table></figure>

<ul>
<li>常量赋值后,复杂数据类型的值可以修改,因为不能改变的是内存地址,不能直接重新赋值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">100</span>,<span class="number">200</span>];</span><br><span class="line">arr[<span class="number">0</span>] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//[&#x27;a&#x27;,&#x27;b&#x27;];</span></span><br><span class="line">arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]; <span class="comment">//Assigment to constant variable 这是将arr赋值给一个新数组</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="let、const、var"><a href="#let、const、var" class="headerlink" title="let、const、var"></a>let、const、var</h4><ol>
<li>使用var声明的变量,其作用域为<font color=red>该语句所在的函数内,且存在变量提升现象</font></li>
<li>使用let声明的变量,其作用域为<font color=red>该语句所在的代码块内,不存在变量提升</font></li>
<li>使用const声明的是常量,在后面出现的代码中<font color=red>不能再修改常量的值</font></li>
</ol>
<table>
<thead>
<tr>
<th>var</th>
<th>let</th>
<th>const</th>
</tr>
</thead>
<tbody><tr>
<td>函数级作用域</td>
<td>块级作用域</td>
<td>块级作用域</td>
</tr>
<tr>
<td>变量提升</td>
<td>不存在变量提升</td>
<td>不存在变量提升</td>
</tr>
<tr>
<td>值可更改</td>
<td>值可更改</td>
<td>值不可更改</td>
</tr>
</tbody></table>
<hr>
<h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><p><strong>ES6中允许从数组中提取值,按照对应的位置,对变量赋值.对象也可以实现解构</strong></p>
<p>==数组解构==将数组中的元素赋值给对应变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> [a,b,c] = arr;</span><br><span class="line"><span class="built_in">console</span>.log(a,b,c); <span class="comment">// 1,2,3 解构成功</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo] = []; <span class="comment">//undefined 结构不成功，变量的值为undefined</span></span><br><span class="line"><span class="keyword">let</span> [bar,foo] = [<span class="number">1</span>]; <span class="comment">// 1 undefined 结构不成功，变量的值为undefined</span></span><br></pre></td></tr></table></figure>

<p>==对象结构== 将对象的属性赋值给同名变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>: <span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = person;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">//&#x27;zhangsan&#x27;  </span></span><br><span class="line"><span class="built_in">console</span>.log(age); <span class="comment">// 20  </span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>: <span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;age, name&#125; = person;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">//&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(age); <span class="comment">// 20  </span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>: <span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;name, sex&#125; = person;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">//&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(age); <span class="comment">// undefined  </span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">age</span>: <span class="number">20</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">name</span>:myName, <span class="attr">age</span>:myAge&#125; = person;   <span class="comment">//左侧的name和age只用于匹配person对象中的属性名，person对象中属性的值赋值给myName和myAge变量</span></span><br><span class="line"><span class="built_in">console</span>.log(myName); <span class="comment">// &#x27;zhangsan&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h4><ul>
<li>箭头函数是用来简化函数定义语法的</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">() =&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> fn = <span class="function">() =&gt;</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>函数体中只有一句代码,且代码的执行结果就是返回值,可以省略大括号</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1,num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1+num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">num1,num2</span>) =&gt;</span> num1+num2;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果形参只有一个,可以省略小括号</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="params">v</span> =&gt;</span> v;</span><br></pre></td></tr></table></figure>

<ul>
<li>箭头函数不绑定this,箭头函数没有自己的this关键字,如果在箭头函数中使用this,this关键字将指向箭头函数定义所在作用域中的this</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> resFn = fn.call(obj);</span><br><span class="line">resFn();</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h4><ul>
<li>剩余参数语法允许我们将一个不定数量的参数表示为一个数组 (实参数量大于形参)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> (<span class="params">first,...args</span>) </span>&#123;   <span class="comment">//args是一个存放多余实参的数组</span></span><br><span class="line">  <span class="built_in">console</span>.log(first); <span class="comment">//10</span></span><br><span class="line">  <span class="built_in">console</span>.log(args); <span class="comment">// [20,30]</span></span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>) </span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;         <span class="comment">//箭头函数不能用arguments</span></span><br><span class="line">  <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">  args.forEach(<span class="function"><span class="params">item</span> =&gt;</span> total += item;)</span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line">;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">10</span>,<span class="number">20</span>)); <span class="comment">// 30</span></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>)); <span class="comment">// 60 </span></span><br></pre></td></tr></table></figure>

<ul>
<li>剩余参数和解构配合使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> students = [<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;wangwu&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> [s1,...s2] = students;</span><br><span class="line"><span class="built_in">console</span>.log(s1); <span class="comment">//&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(s2); <span class="comment">//[&#x27;lisi&#x27;,&#x27;wangwu&#x27;]</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="内置对象扩展"><a href="#内置对象扩展" class="headerlink" title="内置对象扩展"></a>内置对象扩展</h3><h4 id="Array的扩展方法"><a href="#Array的扩展方法" class="headerlink" title="Array的扩展方法"></a>Array的扩展方法</h4><p>==扩展运算符(展开语法)==:扩展运算符可以将数组或对象转为用逗号分隔的参数序列</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">...arr <span class="comment">// 1,2,3</span></span><br><span class="line"><span class="built_in">console</span>.log(...arr); <span class="comment">// 1 2 3 逗号被当作condole.log的输出分割符了,所以没有逗号</span></span><br></pre></td></tr></table></figure>

<p>==扩展运算符应用==：合并数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法1</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">let</span> arr3 = [...arr1,...arr2];</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方法<span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line">arr.push(...arr2)</span><br></pre></td></tr></table></figure>

<p>==扩展运算符应用==：将伪数组转换成真正的数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> oDivs = <span class="built_in">document</span>.getElementByTagName(<span class="string">&#x27;div&#x27;</span>); <span class="comment">//div元素集合是一个伪数组</span></span><br><span class="line">oDivs = [...oDivs];</span><br></pre></td></tr></table></figure>

<p>==构造函数方法：Array.from()==:将伪数组或可遍历对象转换为真正的数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arratLike = &#123; <span class="comment">//伪数组</span></span><br><span class="line">  <span class="string">&#x27;0&#x27;</span>:<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;1&#x27;</span>:<span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;2&#x27;</span>:<span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Array</span>.from(arrayLike); <span class="comment">// [&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>==构造函数方法：Array.from()==:该方法还可以接受第二个参数，作用类似于数组中的map()方法，用来对每个元素进行处理，将处理后的值放入返回的数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;  <span class="comment">//伪数组</span></span><br><span class="line">  <span class="string">&#x27;0&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&#x27;1&#x27;</span>: <span class="number">2</span>,                     </span><br><span class="line">  <span class="string">&#x27;length&#x27;</span>: <span class="number">2</span></span><br><span class="line">&#125;                <span class="comment">//数组中有多少个元素，函数就会被调用多少次</span></span><br><span class="line"><span class="keyword">let</span> newArray = <span class="built_in">Array</span>.from(arryLike,<span class="function"><span class="params">item</span> =&gt;</span> item * <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>==实例方法：find()==:用于找出一个符合条件的数组成员，如果没有找到返回undefined</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">&#125;,&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span></span><br><span class="line">&#125;]；</span><br><span class="line"><span class="keyword">let</span> target = arr.find(<span class="function">(<span class="params">item,index</span>) =&gt;</span> item.id == <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>==实例方法：findIndex()==:用于找出<font color=red>第一个</font>符合条件的数组成员的位置，如果没有找到返回-1</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">15</span>];</span><br><span class="line"><span class="keyword">let</span> target = arr.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">9</span>);</span><br><span class="line"><span class="built_in">console</span>.log(index); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>==实例方法：includes()==：判断某个数组是否包含给定的值，返回布尔值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">23</span>,<span class="number">4</span>].includes(<span class="number">2</span>) <span class="comment">//false</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].includes(<span class="number">3</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="String的扩展方法"><a href="#String的扩展方法" class="headerlink" title="String的扩展方法"></a>String的扩展方法</h4><p>==模版字符串==：ES6新增的创建字符串的方式，使用反引号定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">`张三`</span>；</span><br></pre></td></tr></table></figure>

<p>==模版字符串解析变量==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line"><span class="keyword">let</span> sayHello = <span class="string">`hello,my name is <span class="subst">$&#123;name&#125;</span>`</span>; <span class="comment">//hello,my name is 张三</span></span><br></pre></td></tr></table></figure>

<p>==模版字符串可以换行==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> html  = <span class="string">`&lt;div&gt;</span></span><br><span class="line"><span class="string">	&lt;span&gt;<span class="subst">$&#123;result.name&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">	&lt;span&gt;<span class="subst">$&#123;result.age&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">	&lt;span&gt;<span class="subst">$&#123;result.sex&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;`</span>;</span><br></pre></td></tr></table></figure>

<p>==模版字符串中可以调用函数==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;哈哈哈哈哈哈哈哈哈哈&#x27;</span>；</span><br><span class="line">&#125;；</span><br><span class="line"><span class="keyword">let</span> greet = <span class="string">`<span class="subst">$&#123;sayHello()&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(greet); <span class="comment">//哈哈哈哈哈哈哈哈哈哈</span></span><br></pre></td></tr></table></figure>

<p>==实例方法 startsWith()==:判断参数字符串是否在原字符的头部，返回布尔值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;hello world!&#x27;</span>;</span><br><span class="line">str.startsWith(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>==实例方法 endsWith()==:判断参数字符串是否在原字符串的尾部，返回布尔值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;hello world!&#x27;</span>;</span><br><span class="line">str.endsWith(<span class="string">&#x27;!&#x27;</span>) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>==实例方法 repeat()==：将原字符串重复n次，返回一个新字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;x&#x27;</span>.repeat(<span class="number">3</span>) <span class="comment">// &#x27;xxx&#x27;</span></span><br><span class="line"><span class="string">&#x27;hello&#x27;</span>.repeat(<span class="number">2</span>) <span class="comment">//&#x27;hellohello&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Set数据结构"><a href="#Set数据结构" class="headerlink" title="Set数据结构"></a>Set数据结构</h4><p>ES6提供了新的数据结构Set，它类似于数组，但是成员的值都是<font color=red>唯一</font>的，没有重复的值</p>
<ul>
<li><strong>创建Set数据结构</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"><span class="built_in">console</span>.log(s1.size); <span class="comment">// 0 size是Set数据结构的一个属性 它表示Set数据结构里面有多少个值</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(s2.size); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>用Set数据结构数组去重</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s3 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]);</span><br><span class="line"><span class="keyword">const</span> arr = [...s1];</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [&#x27;a&#x27;,&#x27;b&#x27;];</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Set数据结构实例方法</strong></li>
</ul>
<p>==add(value)==:添加某个值，返回Set结构本身</p>
<p>==delete(value)==:删除某个值，返回一个布尔值，表示删除是否成功</p>
<p>==has(value)==:返回一个布尔值，表示该值是否为Set成员</p>
<p>==clear()==:清除所有成员，没有返回值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">a.add(<span class="number">1</span>).add(<span class="number">2</span>).add(<span class="number">3</span>); <span class="comment">//向set结构中添加值</span></span><br><span class="line">s.delete(<span class="number">2</span>)							<span class="comment">//删除set结构中的2值</span></span><br><span class="line">s.has(<span class="number">1</span>)								<span class="comment">//判断set结构中是否有1这个值 返回布尔值</span></span><br><span class="line">s.clear()								<span class="comment">//清除set结构中的所有值</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>遍历</strong></p>
<p>Set结构的实例与数组一样，也拥有forEach方法，用于对每个成员执行某种操作，没有返回值</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.forEach(<span class="function"><span class="params">value</span> =&gt;</span> <span class="built_in">console</span>.log(value))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><h3 id="Node简介"><a href="#Node简介" class="headerlink" title="Node简介"></a>Node简介</h3><h4 id="为什么要学习服务端开发基础"><a href="#为什么要学习服务端开发基础" class="headerlink" title="为什么要学习服务端开发基础"></a>为什么要学习服务端开发基础</h4><ul>
<li>能够和后端程序猿更加紧密的配合</li>
<li>网站业务逻辑前置，学习前端技术需要后端技术支撑（Ajax）</li>
<li>扩展知识视野，能够站在更高的角度审视整个项目</li>
</ul>
<hr>
<h4 id="服务器端开发要做哪些事情"><a href="#服务器端开发要做哪些事情" class="headerlink" title="服务器端开发要做哪些事情"></a>服务器端开发要做哪些事情</h4><ul>
<li>实现网站的业务逻辑</li>
<li>数据的增删改查</li>
</ul>
<hr>
<h4 id="为什么选择Node"><a href="#为什么选择Node" class="headerlink" title="为什么选择Node"></a>为什么选择Node</h4><ul>
<li>使用JS语法开发后端应用</li>
<li>一些公司要求前端工程师掌握Node开发</li>
<li>生态系统活跃，有大量开源库可以使用</li>
<li>前端开发工具大多基于Node开发</li>
</ul>
<hr>
<h4 id="Node是什么"><a href="#Node是什么" class="headerlink" title="Node是什么"></a>Node是什么</h4><p>Node是一个基于Chrome V8引擎的JS代码运行环境</p>
<p>==运行环境==</p>
<ul>
<li>浏览器（软件）能够运行JS代码，浏览器就是JS代码的运行环境</li>
<li>Node（软件）能够运行JS代码，Node就是JS代码的运行环境</li>
</ul>
<hr>
<h4 id="Node-js运行环境安装"><a href="#Node-js运行环境安装" class="headerlink" title="Node.js运行环境安装"></a>Node.js运行环境安装</h4><p>官网：<a target="_blank" rel="noopener" href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
<hr>
<h4 id="PATH环境变量"><a href="#PATH环境变量" class="headerlink" title="PATH环境变量"></a>PATH环境变量</h4><p>存储系统中的目录，在命令行中执行命令的时候系统会自动去这些目录中查找命令的位置。</p>
<hr>
<h4 id="Node-js的组成"><a href="#Node-js的组成" class="headerlink" title="Node.js的组成"></a>Node.js的组成</h4><ul>
<li>JavaScript由三部分组成，ECMAScript，DOM，BOM</li>
<li>Node.js是由ECMAScript及Node环境提供的一些附加API组成的，包括文件、网络、路径等等一些更加强大的API</li>
</ul>
<hr>
<h3 id="Node-js模块化开发"><a href="#Node-js模块化开发" class="headerlink" title="Node.js模块化开发"></a>Node.js模块化开发</h3><h4 id="JavaScript开发弊端"><a href="#JavaScript开发弊端" class="headerlink" title="JavaScript开发弊端"></a>JavaScript开发弊端</h4><p>JS在使用时存在两大问题，<font color=red>文件依赖</font>和<font color=red>命名冲突</font></p>
<hr>
<h4 id="Node-js中模块化开发规范"><a href="#Node-js中模块化开发规范" class="headerlink" title="Node.js中模块化开发规范"></a>Node.js中模块化开发规范</h4><ul>
<li><p>Node.js规定一个<font color=red>JavaScript文件</font>就是一个模块，模块<font color=red>内部定义的变量和函数</font>默认情况下在<font color=red>外部无法得到</font></p>
</li>
<li><p>模块内部可以使用<font color=red>exports对象进行成员导出</font>，使用<font color=red>require方法</font>导入其他模块</p>
</li>
</ul>
<p>==模块成员导出==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="comment">//在模块内部定义变量</span></span><br><span class="line"><span class="keyword">let</span> version  =<span class="number">1.0</span>;</span><br><span class="line"><span class="comment">//在模块内部定义方法</span></span><br><span class="line"><span class="keyword">const</span> sayHi = <span class="function"><span class="params">name</span> =&gt;</span> <span class="string">`您好，<span class="subst">$&#123;name&#125;</span>`</span>；</span><br><span class="line"><span class="comment">//向模块外部到处数据</span></span><br><span class="line"><span class="built_in">exports</span>.version = version;</span><br><span class="line"><span class="built_in">exports</span>.sayHi = sayHi;</span><br></pre></td></tr></table></figure>

<p>==模块成员导出的另一种方式==:<font color=red>exports</font>是<font color=red>module.exports</font>的别名<font color=red>(地址引用关系)</font>，<font color=red>导出对象最终以module.exports为准</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在模块内部定义变量</span></span><br><span class="line"><span class="keyword">let</span> version  =<span class="number">1.0</span>;</span><br><span class="line"><span class="comment">//在模块内部定义方法</span></span><br><span class="line"><span class="keyword">const</span> sayHi = <span class="function"><span class="params">name</span> =&gt;</span> <span class="string">`您好，<span class="subst">$&#123;name&#125;</span>`</span>；</span><br><span class="line"><span class="built_in">module</span>.exports.version = version;</span><br><span class="line"><span class="built_in">module</span>.exporrs.sayHi = sayHi;</span><br></pre></td></tr></table></figure>

<p>==模块导出两种方式的联系与区别==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> greeting = <span class="function"><span class="params">name</span> =&gt;</span> <span class="string">`hello <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">module</span>.exports.greeting = greeting;</span><br><span class="line"><span class="comment">//当exports对象和module.exports对象指向的不是同一个对象时，以module.exports为准</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==模块成员导入==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="comment">//在b.js模块中导入模块a</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="built_in">require</span>(<span class="string">&#x27;./b.js&#x27;</span>);   <span class="comment">//.js可以省略</span></span><br><span class="line"><span class="comment">//输出a模块中的version变量</span></span><br><span class="line"><span class="built_in">console</span>.log(a.version);</span><br><span class="line"><span class="comment">//调用a模块中的sayHi方法 并输出其返回值</span></span><br><span class="line"><span class="built_in">console</span>.log(a.sayHi(<span class="string">&#x27;哈哈哈哈&#x27;</span>))；</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="系统模块"><a href="#系统模块" class="headerlink" title="系统模块"></a>系统模块</h3><h4 id="什么是系统模块"><a href="#什么是系统模块" class="headerlink" title="什么是系统模块"></a>什么是系统模块</h4><p>Node运行环境提供的API。因为这些API都是以模块化的方式进行开发的，所以我们又称Node运行环境提供的API为系统模块</p>
<hr>
<h4 id="系统模块fs文件操作"><a href="#系统模块fs文件操作" class="headerlink" title="系统模块fs文件操作"></a>系统模块fs文件操作</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>); <span class="comment">//f:file 文件，s:system系统， 文件操作系统</span></span><br></pre></td></tr></table></figure>

<p>==读取文件方法==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(<span class="string">&#x27;文件路径/文件名称&#x27;</span>[,<span class="string">&#x27;文件编码&#x27;</span>]，callback)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取文件案例</span></span><br><span class="line"><span class="comment">//导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.readFile(<span class="string">&#x27;../css/base.css&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>, <span class="function">(<span class="params">err,doc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//如果文件读取发生了错误 参数err的值为错误对象 否则err的值为null</span></span><br><span class="line">  <span class="comment">//doc参数为文件内容</span></span><br><span class="line">  <span class="keyword">if</span>(err == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">//在控制台中输出文件内容</span></span><br><span class="line">    <span class="built_in">console</span>.log(doc);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>==写入内容操作==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(<span class="string">&#x27;文件路径/文件名称&#x27;</span>,<span class="string">&#x27;数据&#x27;</span>, callback);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> content  = <span class="string">&#x27;我要写入的内容，如果路径里没有demo.txt，系统会自动创建&#x27;</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;./demo.txt&#x27;</span>,content,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(err != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;文件写入成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="系统模块path路径操作"><a href="#系统模块path路径操作" class="headerlink" title="系统模块path路径操作"></a>系统模块path路径操作</h4><p>==为什么要进行路径拼接==</p>
<ul>
<li>不同操作系统的路径分隔符不统一</li>
<li>/public/uploads/avatar</li>
<li>Windows上是\ / 都可以</li>
<li>Linux上只能是 /</li>
</ul>
<p>==路径拼接语法==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.join(<span class="string">&#x27;路径&#x27;</span>，<span class="string">&#x27;路径&#x27;</span>,...) <span class="comment">//最后一个参数是文件 ，路径数量不固定</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入path模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//路径拼接</span></span><br><span class="line"><span class="keyword">let</span> finialPath = path.join(<span class="string">&#x27;itcast&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;index.css&#x27;</span>);</span><br><span class="line"><span class="comment">//因为path.join不是耗时操作，所以可以通过它的返回值来接收拼接的结果</span></span><br><span class="line"><span class="built_in">console</span>.log(finialPath); <span class="comment">// itcast\a\b\index.css</span></span><br></pre></td></tr></table></figure>

<p>==相对路径和绝对路径==</p>
<ul>
<li>大多数情况下使用绝对路径，因为相对路径有时候相对的是命令行工具的当前工作目录</li>
<li>在读取文件或者设置文件路径时都会选择绝对路径</li>
<li>使用__dirname获取当前文件所在的绝对路径</li>
<li>require比较特殊，它当中的相对路径就是当前文件的相对路径 所以可以写相对路径</li>
</ul>
<hr>
<h3 id="第三方模块"><a href="#第三方模块" class="headerlink" title="第三方模块"></a>第三方模块</h3><h4 id="什么是第三方模块"><a href="#什么是第三方模块" class="headerlink" title="什么是第三方模块"></a>什么是第三方模块</h4><ul>
<li>别人写好的、具有特定功能的、我们能直接使用的模块即第三方模块，由于第三方模块通常都是由多个文件组成并且被放置在一个文件夹中，所以又名包</li>
</ul>
<hr>
<h4 id="第三方模块有两种存在形式"><a href="#第三方模块有两种存在形式" class="headerlink" title="第三方模块有两种存在形式"></a>第三方模块有两种存在形式</h4><ul>
<li><p>以JS文件形式存在，提供实现项目具体功能的API接口</p>
</li>
<li><p>以命令行工具存在，辅助项目开发</p>
</li>
</ul>
<hr>
<h4 id="获取第三方模块"><a href="#获取第三方模块" class="headerlink" title="获取第三方模块"></a>获取第三方模块</h4><ul>
<li><p>npmjs.com: 第三方模块的存储和分发仓库</p>
</li>
<li><p>npm(node package manager): node的第三方模块管理工具</p>
</li>
<li><p>实际上npm也是node的第三方模块，只是每个使用node的使用者都要安装，所以安装node时已被集成</p>
</li>
<li><p>通过npm下载其他第三方模块：npm install 模块名称(默认下载到命令行工具的当前工作目录下)</p>
</li>
<li><p>卸载其他第三方模块：npm uninstall package 模块名称</p>
</li>
</ul>
<p>全局安装与本地安装</p>
<ul>
<li>命令行工具： 全局安装 （任何项目都可以使用）</li>
<li>库文件：本地安装 （限本项目使用）</li>
</ul>
<hr>
<h4 id="第三方模块nodemon"><a href="#第三方模块nodemon" class="headerlink" title="第三方模块nodemon"></a>第三方模块nodemon</h4><p>nodemon是一个命令行工具，用以辅助项目开发<br>在node.js中，每次修改文件都要在命令行工具中重新执行该文件，非常繁琐<br>它可以监控文件的保存操作，文件保存它就会帮我们执行文件</p>
<ul>
<li>使用步骤</li>
</ul>
<ol>
<li>使用 npm install nodemon -g 下载它 （Mac要加sudo su或者sudo）</li>
<li>在命令行工具中用nodemon命令替代node命令执行文件</li>
</ol>
<hr>
<h4 id="第三方模块nrm"><a href="#第三方模块nrm" class="headerlink" title="第三方模块nrm"></a>第三方模块nrm</h4><p>nrm(arm registry manager): npm下载地址切换工具</p>
<p>npm默认的下载地址在国外，国内下载速度慢</p>
<ul>
<li>使用步骤</li>
</ul>
<ol>
<li>使用 npm install nrm -g</li>
<li>查询可用下载地址列表 nrm ls</li>
<li>切换npm下载地址nrm use 下载地址名称</li>
</ol>
<hr>
<h4 id="第三方模块Gulp"><a href="#第三方模块Gulp" class="headerlink" title="第三方模块Gulp"></a>第三方模块Gulp</h4><p>基于node平台开发的前端构建工具<br>将机械化操作编写成任务，想要执行机械化操作时执行一个命令行命令任务就能自动化执行了<br>用机器代替手工，提高开发效率。</p>
<p>==Gulp能做什么==</p>
<ul>
<li>项目上线，HTML、CSS、JS文件压缩合并</li>
<li>语法转换(es6、less)</li>
<li>公共文件抽离</li>
<li>修改文件浏览器自动刷新</li>
</ul>
<p>==Gulp使用==</p>
<ol>
<li>使用npm install gulp 下载gulp库文件</li>
<li>在项目根目录下建立gulpfile.js文件</li>
<li>重构项目的文件夹结构src目录放置源代码文件 dist目录放置构建后的文件</li>
<li>在gulp.js文件中编写任务</li>
<li>在命令行工具中执行gulp任务</li>
</ol>
<p>==Gulp中提供的方法==</p>
<ul>
<li>gulp.src(): 获取任务要处理的文件</li>
<li>gulp.dest(): 输出文件 相当于复制</li>
<li>gulp.task(): 建立gulp任务         第一个参数是要建立的任务名字  第二个参数回调函数</li>
<li>gulp.watch(): 监控文件的变化</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="comment">//使用gulp.task()方法建立任务</span></span><br><span class="line">gulp.tast(<span class="string">&#x27;first&#x27;</span>, <span class="function">() =&gt;</span> &#123;   </span><br><span class="line">  <span class="comment">//获取要处理的文件</span></span><br><span class="line">  gulp.src(<span class="string">&#x27;./src/css/base.css&#x27;</span>)</span><br><span class="line">  <span class="comment">//将要处理的文件输出到dist目录</span></span><br><span class="line">  .pipe(gulp.dest(<span class="string">&#x27;./dist/css&#x27;</span>))  <span class="comment">//pipe就是处理的意思</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>==Gulp插件==</p>
<ul>
<li>gulp-htmlmin: html文件压缩</li>
<li>gulp-csso: 压缩css</li>
<li>gulp-babel: JS语法转化</li>
<li>gulp-less: less语法转化</li>
<li>gulp-uglify: 压缩混淆的JS</li>
<li>gulp-file-include 公共文件包含</li>
<li>browsersync 浏览器实时同步</li>
</ul>
<hr>
<h4 id="node-mondules文件夹的问题"><a href="#node-mondules文件夹的问题" class="headerlink" title="node_mondules文件夹的问题"></a>node_mondules文件夹的问题</h4><ol>
<li>文件夹以及文件过多过碎，当我们将项目整体拷贝给别人的时候，传输速度会很慢</li>
<li>复杂的模块依赖关系需要被记录，确保模块的版本和当前保持一致，否则会导致当前项目运行报错</li>
</ol>
<hr>
<h4 id="package-json文件的作用"><a href="#package-json文件的作用" class="headerlink" title="package.json文件的作用"></a>package.json文件的作用</h4><p>项目描述文件，记录了当前项目信息，例如项目名称、版本、作者、github地址、当前项目依赖了哪些第三方模块等</p>
<p>使用<font color=red>npm init -y</font>命令生成</p>
<p><font color=red>开发环境</font>接受到项目的人 只需要在命令行输入 npm install 就会根据package.json下载相应的依赖（所有依赖）</p>
<p><font color=red>运营环境</font>接受到项目的人 只需要在命令行输入 npm install –production就会根据package.json下载相应的依赖（项目依赖） production生产环境 即线上运营环境只需要项目依赖</p>
<hr>
<h4 id="Package-lock-json文件的作用"><a href="#Package-lock-json文件的作用" class="headerlink" title="Package-lock.json文件的作用"></a>Package-lock.json文件的作用</h4><ul>
<li>锁定包的版本，确保再次下载时不会因为包版本不同而产生问题</li>
<li>加快下载速度，因为该文件中已经记录了项目所依赖第三方包的树状结构和包的下载地址，重新安装时只需下载即可，不需要做额外的工作</li>
</ul>
<hr>
<h4 id="项目依赖"><a href="#项目依赖" class="headerlink" title="项目依赖"></a>项目依赖</h4><ul>
<li>在项目的开发阶段和线上运营阶段，都需要依赖的第三方包，称为项目依赖</li>
<li>使用npm install包命令下载的文件会默认添加到package.json文件的dependencies字段中</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例如</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&#x27;dependencies&#x27;</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;jquery&#x27;</span>: <span class="string">&#x27;^3.3.1&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="开发依赖"><a href="#开发依赖" class="headerlink" title="开发依赖"></a>开发依赖</h4><ul>
<li>在项目的开发阶段需要依赖，线上运营阶段不需要依赖的第三方包，称为开发依赖</li>
<li>使用npm install 包名 –save -dev命令将包添加到package.json文件的devDependencies字段中</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例如</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&#x27;devDependencies&#x27;</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;gulp&#x27;</span>: <span class="string">&#x27;^3,9,1&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Node-js中模块的加载机制"><a href="#Node-js中模块的加载机制" class="headerlink" title="Node.js中模块的加载机制"></a>Node.js中模块的加载机制</h3><h4 id="当模块拥有路径当没有后缀时"><a href="#当模块拥有路径当没有后缀时" class="headerlink" title="当模块拥有路径当没有后缀时"></a>当模块拥有路径当没有后缀时</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./find.js&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./find&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>require方法根据模块路径查找模块，如果是完整路径，直接引入模块。</li>
<li>如果模块后缀省略，先找同名JS文件再找同名JS文件夹</li>
<li>如果找到了同名文件夹，找文件夹中的index.js</li>
<li>如果文件夹中没有indexjs就会去当前文件夹中的package.js文件中查找main选项中的入口文件5.如果找指定的入口文件不存在或者没有指定入口文件就会报错，模块没有被找到</li>
</ol>
<hr>
<h4 id="当模块没有路径且没有后缀"><a href="#当模块没有路径且没有后缀" class="headerlink" title="当模块没有路径且没有后缀"></a>当模块没有路径且没有后缀</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;find&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>Node.js会假设它是系统模块</li>
<li>Nodejs会去node_modules文件夹中</li>
<li>首先看是否有该名字的JS文件</li>
<li>再看是否有该名字的文件夹</li>
<li>如果是文件夹看里面是否有indexjs</li>
<li>如果没有indexjs查看该文件夹中的package.json中的main选项确定模块入口文件</li>
<li>否则找不到报错</li>
</ol>
<hr>
<h3 id="服务器基础概念"><a href="#服务器基础概念" class="headerlink" title="服务器基础概念"></a>服务器基础概念</h3><h4 id="Node网站服务器"><a href="#Node网站服务器" class="headerlink" title="Node网站服务器"></a>Node网站服务器</h4><p>能够提供网站访问服务的机器就是网站服务器，它能够接收客户端的<font color=red>请求</font>，能够对请求作出<font color=red>响应</font></p>
<hr>
<h4 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h4><p>互联网中设备的唯一标识。<br>IP是Internet Protocol Address的简写，代表互联网协议地址。</p>
<hr>
<h4 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h4><p>由于IP地址难于记忆，所以产生了域名的概念，所谓域名就是平时<font color=red>上网说使用的地址</font></p>
<p>虽然在地址栏中输入的是网址，但是最终还是会将域名转换为ip才能访问到指定的网站服务器</p>
<hr>
<h4 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h4><p>端口是计算机与外界通讯交流的出口，用来区分服务器电脑中提供的不同的服务</p>
<hr>
<h4 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h4><p>统一资源定位符，是专为标识Internet网上资源位置而设的一种编址方式，我们平时所说的网页地址指的就是URL</p>
<p>==URL的组成==</p>
<p><font color=red>传输协议:</font>//服务器IP或域名:/<font color=red>资源所在位置标识</font></p>
<p><font color=red>http:</font>//<a target="_blank" rel="noopener" href="http://www.itcast.cn/">www.itcast.cn</a><font color=red>/new/20181018/09152238514.html</font></p>
<p>http:超文本传输协议，提供了一种发布和接收HTML页面的方法</p>
<hr>
<h3 id="创建web服务器"><a href="#创建web服务器" class="headerlink" title="创建web服务器"></a>创建web服务器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用系统模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> app = http.creatServer();</span><br><span class="line"><span class="comment">//当客户端发送请求的时候</span></span><br><span class="line">app.on(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//响应</span></span><br><span class="line">  res.end(<span class="string">&#x27;&lt;h2&gt;&lt;/h2&gt;&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//监听3000端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;网站服务器启动成功&#x27;</span>)；</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h3><p><font color=red>超文本传输协议</font>规定了如何从网站服务器传输超文本到本地浏览器，它基于客户端服务器架构工作，是客户端(用户)和服务器(网站)请求和应答的标准</p>
<h4 id="报文"><a href="#报文" class="headerlink" title="报文"></a>报文</h4><p>在HTTP请求和响应的过程中传递的数据块就叫报文，包括要传送的数据和一些附加信息，并且要遵守规定好的格式</p>
<p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/HTTP%E5%8D%8F%E8%AE%AE%E6%8A%A5%E6%96%87.png" alt="image-20210830203327388"></p>
<hr>
<h4 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h4><ol>
<li>请求方式（Request Method）</li>
</ol>
<ul>
<li>GET 请求数据</li>
<li>POST 发送数据 </li>
</ul>
<ol start="2">
<li>请求地址（Request URL）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.on(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">  req.hesders <span class="comment">//获取请求报文</span></span><br><span class="line">  req.url <span class="comment">// 获取请求地址</span></span><br><span class="line">  req.method <span class="comment">// 获取请求方法</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h4><ol>
<li>HTTP状态码</li>
</ol>
<ul>
<li>200请求成功</li>
<li>404请求的资源没有被找到</li>
<li>500服务器端错误</li>
<li>400客户端请求有语法错误</li>
</ul>
<ol start="2">
<li>内容类型</li>
</ol>
<ul>
<li>text/html</li>
<li>text/css</li>
<li>application/javascript</li>
<li>image/jpeg</li>
<li>application/json</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">res.writeHead(status,&#123;</span><br><span class="line">  <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;text/html;charset=utf8&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="GET请求参数"><a href="#GET请求参数" class="headerlink" title="GET请求参数"></a>GET请求参数</h4><ul>
<li>参数被放置在浏览器地址栏中，例如：<a target="_blank" rel="noopener" href="http://localhost:3000/?name=zhangsan&amp;age=20">http://localhost:3000/?name=zhangsan&amp;age=20</a></li>
</ul>
<p>==服务器获取GET请求参数==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> param = url.parse(req.url,<span class="literal">true</span>).query;</span><br><span class="line"><span class="built_in">console</span>.log(query.name);</span><br><span class="line"><span class="built_in">console</span>.log(query.age);</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="POST请求参数"><a href="#POST请求参数" class="headerlink" title="POST请求参数"></a>POST请求参数</h4><ul>
<li>参数被放置在请求体(请求报文)中传输</li>
<li>获取POST参数需要使用data事件和end事件</li>
<li>使用querystring系统模块将参数转换为对象格式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入系统模块处理请求参数模块</span></span><br><span class="line"><span class="keyword">const</span> querystring. = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line">app.on(<span class="string">&#x27;requst&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> postData = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="comment">//监听参数传输事件 data事件  chunk是每次传输的数据</span></span><br><span class="line">  req.on(<span class="string">&#x27;data&#x27;</span>,<span class="function">(<span class="params">chunk</span>) =&gt;</span> postData += chunk);</span><br><span class="line">  <span class="comment">//监听参数传输完毕事件  end事件</span></span><br><span class="line">  req.on(<span class="string">&#x27;end&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(querystring.parse(postData));</span><br><span class="line">  &#125;)；</span><br><span class="line">  res.end(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>路由是指客户端请求地址与服务器端程序代码的对应关系。简单点说，就是请求什么响应什么</p>
<p><a target="_blank" rel="noopener" href="http://localhost:300/index">http://localhost:300/index</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:3000/login">http://localhost:3000/login</a></p>
<p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/%E8%B7%AF%E7%94%B1.png" alt="image-20210831100327671"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入系统模块http</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">//引入系统模块url</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="comment">//创建服务器对象</span></span><br><span class="line"><span class="keyword">const</span> app = http.createServer();</span><br><span class="line"><span class="comment">//监听客服端请求事件</span></span><br><span class="line">app.on(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//响应报文处理</span></span><br><span class="line">    res.writeHead(<span class="number">200</span>,&#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;text/html;charset=utf8&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//获取请求地址</span></span><br><span class="line">    <span class="keyword">const</span> pathname = url.parse(req.url).pathname;</span><br><span class="line">    <span class="comment">//获取请求方式</span></span><br><span class="line">    <span class="keyword">const</span> method = req.method.toLowerCase();</span><br><span class="line">    <span class="keyword">if</span>(method == <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(pathname == <span class="string">&#x27;/&#x27;</span> || pathname == <span class="string">&#x27;/index&#x27;</span>) &#123;</span><br><span class="line">            res.end(<span class="string">&#x27;欢迎来到首页&#x27;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(pathname == <span class="string">&#x27;/list&#x27;</span>) &#123;</span><br><span class="line">           res.end(<span class="string">&#x27;欢迎来到列表页&#x27;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            res.end(<span class="string">&#x27;您请求的页面不存在&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(method == <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;网站服务器启动成功&#x27;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="静态资源"><a href="#静态资源" class="headerlink" title="静态资源"></a>静态资源</h4><p>服务器端不需要处理，可以直接响应给客户端的资源就是静态资源，例如CSS、JS、image文件</p>
<p><a target="_blank" rel="noopener" href="http://www.itcast.cn/images/logo.png">http://www.itcast.cn/images/logo.png</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//静态文件访问</span></span><br><span class="line"><span class="comment">//引入系统模块http</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">//引入系统模块url</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="comment">//引入系统模块path</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//引入系统模块fs</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//引入第三方模块mime</span></span><br><span class="line"><span class="keyword">const</span> mime = <span class="built_in">require</span>(<span class="string">&#x27;mime&#x27;</span>);</span><br><span class="line"><span class="comment">//创建服务器对象</span></span><br><span class="line"><span class="keyword">const</span> app = http.createServer();</span><br><span class="line"><span class="comment">//监听客户端请求事件</span></span><br><span class="line">app.on(<span class="string">&#x27;request&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//获取客户端请求路径</span></span><br><span class="line">    <span class="comment">// const pathname = url.parse(req.url).pathname;</span></span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">new</span> URL(<span class="string">`<span class="subst">$&#123;req.url&#125;</span>`</span>,<span class="string">&#x27;http://localhost:3000/&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> pathname = data.pathname;</span><br><span class="line">    <span class="comment">// console.log(data);</span></span><br><span class="line">    pathname = pathname == <span class="string">&#x27;/&#x27;</span> ? <span class="string">&#x27;/index.html&#x27;</span> : pathname;</span><br><span class="line">    <span class="comment">//将用户请求路径转换为服务器硬盘路径</span></span><br><span class="line">    <span class="keyword">const</span> realPath = path.join(__dirname, <span class="string">&#x27;public&#x27;</span> + pathname);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取资源类型</span></span><br><span class="line">    <span class="keyword">let</span> type = mime.getType(realPath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取文件</span></span><br><span class="line">    fs.readFile(realPath,<span class="function">(<span class="params">error,doc</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//如果读取失败</span></span><br><span class="line">        <span class="keyword">if</span>(error != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//响应头处理</span></span><br><span class="line">        res.writeHead(<span class="number">404</span>,&#123;</span><br><span class="line">            <span class="string">&#x27;content-type&#x27;</span>:<span class="string">&#x27;text/html;charset=utf8&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">            res.end(<span class="string">&#x27;文件读取失败&#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        res.writeHead(<span class="number">200</span>,&#123;</span><br><span class="line">            <span class="string">&#x27;content-type&#x27;</span>: type   <span class="comment">//低版本浏览器必须要指定文本类型</span></span><br><span class="line">        &#125;)</span><br><span class="line">        res.end(doc);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//监听服务器端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;服务器启动成功&#x27;</span>);</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="动态资源"><a href="#动态资源" class="headerlink" title="动态资源"></a>动态资源</h4><p>相同的请求地址不同的响应资源，这种资源就是动态资源</p>
<hr>
<h3 id="Node-js异步编程"><a href="#Node-js异步编程" class="headerlink" title="Node.js异步编程"></a>Node.js异步编程</h3><h4 id="同步API，异步API"><a href="#同步API，异步API" class="headerlink" title="同步API，异步API"></a>同步API，异步API</h4><p>==同步API==：只有当前API执行完成后，才能继续执行下一个API</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;before&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;after&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>==异步API==: 当前API的执行不会阻塞后续代码的执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;before&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(</span><br><span class="line"><span class="function">() =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">&#x27;last&#x27;</span>);</span><br><span class="line">&#125;,<span class="number">2000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;after&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>==同步API与异步API区别==（获取返回值）</p>
<ul>
<li>同步API可以从返回值中拿到API执行的结果，但是异步API是不可以的(只能通过回调函数来拿)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同步</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n1,n2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n1=n2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = sum(<span class="number">10</span>,<span class="number">20</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 30</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//异步</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMsg</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">msg</span>: <span class="string">&#x27;hello Node.js&#x27;</span>&#125;</span><br><span class="line">  &#125;,<span class="number">2000</span>); <span class="comment">//这里会返回undefined  因为异步API不会阻塞后续代码的执行</span></span><br><span class="line">  <span class="comment">//这里 默认return undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> msg = getMsg();</span><br><span class="line"><span class="built_in">console</span>.log(msg); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//回调函数获取异步API返回值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = b = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> sum = a + b;</span><br><span class="line">    callback(sum);   <span class="comment">//将异步API执行的结果通过参数的形式传递出来</span></span><br><span class="line">  &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line">getData(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data)); </span><br></pre></td></tr></table></figure>



<p>==回调函数==：自己定义函数让别人去调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//getData函数定义</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) <span class="title">getData</span> (<span class="params">callback</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">//getData函数调用</span></span><br><span class="line">gerData(<span class="function">() =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>==同步API与异步API区别==（代码执行顺序）</p>
<p>同步API从上到下依次执行，前面代码会阻塞后面代码的执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;for循环后面的代码&#x27;</span>)；</span><br></pre></td></tr></table></figure>

<p>异步API不会等待API执行完成后再向下执行代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;代码开始执行&#x27;</span>)；</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;2秒后执行的代码&#x27;</span>),<span class="number">2000</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;0秒后执行的代码&#x27;</span>)，<span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;代码结束执行&#x27;</span>)；</span><br></pre></td></tr></table></figure>

<p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png" alt="image-20210831170107089"></p>
<hr>
<h4 id="Node-js中的异步API"><a href="#Node-js中的异步API" class="headerlink" title="Node.js中的异步API"></a>Node.js中的异步API</h4><ol>
<li>读取文件API</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(<span class="string">&#x27;./demo.txt&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>监听事件API</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>

<p>如果异步API后面的代码的执行依赖当前异步API的执行结果，但实际上后续代码在执行的时候异步API还没有返回结果，这个问题要怎么解决呢？</p>
<p>比如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(<span class="string">&#x27;./demo.txt&#x27;</span>,<span class="function">(<span class="params">err,result</span>) =&gt;</span> &#123;&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;文件读取结果&#x27;</span>)；</span><br><span class="line"><span class="comment">//需求： 依次读取A，B，C三个文件</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//回调地狱</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,doc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(doc);</span><br><span class="line">    fs.readFile(<span class="string">&#x27;./2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,doc</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(doc);</span><br><span class="line">        fs.readFile(<span class="string">&#x27;./3.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,doc</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(doc);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h4><p>Promise出现的目的是解决Node.js异步编程中回调地狱的问题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">      resolve(&#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      reject(<span class="string">&#x27;失败了&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,<span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result);)<span class="comment">// &#123;name: &#x27;zhangsan&#x27;&#125;</span></span><br><span class="line">       .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(error);)<span class="comment">// 失败了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(<span class="string">&#x27;./1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result1</span>) =&gt;</span> &#123;</span><br><span class="line">            resolve(result1);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(<span class="string">&#x27;./2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result2</span>) =&gt;</span> &#123;</span><br><span class="line">            resolve(result2);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p3 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(<span class="string">&#x27;./3.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,result3</span>) =&gt;</span> &#123;</span><br><span class="line">            resolve(result3);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p1().then(<span class="function">(<span class="params">r1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(r1);</span><br><span class="line">    <span class="keyword">return</span> p2();</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">r2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(r2);</span><br><span class="line">    <span class="keyword">return</span> p3();</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">r3</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(r3);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="异步函数-ES7"><a href="#异步函数-ES7" class="headerlink" title="异步函数(ES7)"></a>异步函数(ES7)</h4><p>异步函数是异步编程语法的终极解决方案，它可以让我们将异步代码写成同步的形式，让代码不再有回调函数嵌套，使代码变得清晰明了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="keyword">async</span>() =&gt; &#123;&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>==async关键字==</p>
<ol>
<li>普通函数定义前加async关键字 普通函数变成异步函数</li>
<li> <font color=red>异步函数默认返回promise对象</font></li>
<li>在异步函数内部使用return关键字进行结果返回 结果会被包裹的promise对象中 return关键字代替了resolve方法</li>
<li>在异步函数内部使用throw关键字抛出程序异常</li>
<li>调用异步函数在链式调用then方法获取异步函数执行结果</li>
<li>调用异步函数再链式调用catch方法获取异步函数执行的错误信息</li>
</ol>
<p>==await关键字==</p>
<ol>
<li>await关键字只能出现在异步函数中</li>
<li>await promise   await后面只能写promise对象 写其他类型的API是不可以的</li>
<li>await关键字可是暂停异步函数向下执行 直到promise返回结果</li>
</ol>
<hr>
<h3 id="Node-js全局对象global"><a href="#Node-js全局对象global" class="headerlink" title="Node.js全局对象global"></a>Node.js全局对象global</h3><p>在<font color=red>浏览器</font>中全局对象是<font color=red>window</font>，在<font color=red>Node</font>中全局对象是<font color=red>global</font></p>
<p>Node中全局对象下有以下方法，可以在任何地方使用，global可以省略</p>
<ul>
<li>console.log(). 在控制台输出</li>
<li>setTimeout() 设置超时定时器</li>
<li>clearTimeout() 清除超时定时器</li>
<li>setInterval() 设置间歇定时器</li>
<li>clearInterval() 清除间歇定时器</li>
</ul>
<hr>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="为什么要使用数据库"><a href="#为什么要使用数据库" class="headerlink" title="为什么要使用数据库"></a>为什么要使用数据库</h3><ul>
<li>动态网站中的数据都是存储在数据库中的</li>
</ul>
<h3 id="什么是数据库"><a href="#什么是数据库" class="headerlink" title="什么是数据库"></a>什么是数据库</h3><p>数据库即存储数据的仓库，可以将数据进行有序的分门别类的存储。它是独立于语言之外的软件，可以通过API去操作它</p>
<p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/%E6%95%B0%E6%8D%AE%E5%BA%93.png" alt="image-20210831210836826"></p>
<hr>
<h3 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h3><p>在一个数据库软件中可以包含多个数据仓库，在每个数据仓库中可以包含多个数据集合，每个数据集合中可以包含多条文档(具体的数据)。</p>
<table>
<thead>
<tr>
<th>术语</th>
<th>解释说明</th>
</tr>
</thead>
<tbody><tr>
<td>database</td>
<td>数据库，mongoDB数据库软件中可以建立多个数据库</td>
</tr>
<tr>
<td>collection</td>
<td>集合，一组数据的集合，可以理解为JavaScript中的数组。表</td>
</tr>
<tr>
<td>document</td>
<td>文档，一条具体的数据，可以理解为JS中的对象。</td>
</tr>
<tr>
<td>field</td>
<td>字段，文档中的属性名称，可以理解为JS的对象属性</td>
</tr>
</tbody></table>
<hr>
<h3 id="Mongoose第三方包"><a href="#Mongoose第三方包" class="headerlink" title="Mongoose第三方包"></a>Mongoose第三方包</h3><ul>
<li>使用Node.js操作MongoDB数据库需要依赖Node.js第三方包mongoose</li>
<li>使用npm install mongose命令下载</li>
</ul>
<hr>
<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><p>在MongoDB中<font color=red>不需要显式创建数据库</font>，如果正在使用的数据库不存在，<font color=red>mongoDB会自动创建</font></p>
<hr>
<h3 id="数据库增删改查"><a href="#数据库增删改查" class="headerlink" title="数据库增删改查"></a>数据库增删改查</h3><p>==创建表==</p>
<p>创建表分为两步，一是对<font color=red>表设定规则</font>,二是<font color=red>创建表</font>,创建mongoose.Schema构造函数的实例即可创建表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设定表规则</span></span><br><span class="line"><span class="keyword">const</span> courseSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">author</span>: <span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">isPublished</span>: <span class="built_in">Boolean</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//创建表并应用规则</span></span><br><span class="line"><span class="keyword">const</span> Course = mongoose.model(<span class="string">&#x27;Course&#x27;</span>, courseSchema); <span class="comment">//courses</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建表实例并插入数据</span></span><br><span class="line"><span class="keyword">const</span> course = <span class="keyword">new</span> Course(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  <span class="attr">author</span>: <span class="string">&#x27;法外狂徒&#x27;</span>,</span><br><span class="line">  <span class="attr">isPublished</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//将数据保存到数据库中</span></span><br><span class="line">course.save();</span><br></pre></td></tr></table></figure>

<p>==插入数据第二种方式==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Course.create(&#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">author</span>: <span class="string">&#x27;法外狂徒&#x27;</span>,<span class="attr">isPublished</span>: <span class="literal">true</span>&#125;,<span class="function">(<span class="params">err,doc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//错误对象</span></span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">  <span class="comment">//当前插入数据</span></span><br><span class="line">  <span class="built_in">console</span>.log(doc)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Course.create(&#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,<span class="attr">author</span>: <span class="string">&#x27;法外狂徒&#x27;</span>,<span class="attr">isPublished</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">			.then(<span class="function"><span class="params">doc</span> =&gt;</span> <span class="built_in">console</span>.log(doc))</span><br><span class="line">			.catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(err)) <span class="comment">//这个异步API返回promise对象所以支持异步函数的语法</span></span><br></pre></td></tr></table></figure>

<p>==mongoDB数据库导入数据==</p>
<p>mongoimport -d 数据库名称 -c 表名 –file 要导入的数据文件</p>
<p>找到mongodb数据库的安装目录，将安装目录下的bin目录放置在环境变量中</p>
<p>==查询数据==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用规则创建表</span></span><br><span class="line"><span class="keyword">const</span> User = mongoose.model(<span class="string">&#x27;User&#x27;</span>,userSchema);</span><br><span class="line"><span class="comment">//查询用户表中的所有数据 返回数组</span></span><br><span class="line">User.find().then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result));</span><br><span class="line"><span class="comment">//find方法通过_id字段查询数据  返回数组</span></span><br><span class="line">User.find(&#123;<span class="string">&#x27;_id&#x27;</span>: <span class="string">&#x27;34jk4534j54&#x27;</span>&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result))</span><br><span class="line"></span><br><span class="line"><span class="comment">//findOne方法查询数据 返回一条数据（对象）</span></span><br><span class="line">User.findOne(&#123;<span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result))</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配大于 小于</span></span><br><span class="line">User.find(&#123;<span class="attr">age</span>: &#123;<span class="attr">$gt</span>: <span class="number">20</span>, <span class="attr">$lt</span>: <span class="number">50</span>&#125;&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(redult)&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配包含 返回promise对象</span></span><br><span class="line">User.find(&#123;<span class="attr">hobbies</span>: &#123;<span class="attr">$in</span>: [<span class="string">&#x27;足球&#x27;</span>]&#125;&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span>    &#123;<span class="built_in">console</span>.log(result)&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//选择要查询的字段 返回promise对象</span></span><br><span class="line">User.find().select(<span class="string">&#x27;name email&#x27;</span>).then(<span class="function"><span class="params">result</span> =&gt;</span>...)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将数据按照年龄进行排序   返回promise对象</span></span><br><span class="line">User.find().sort(<span class="string">&#x27;age&#x27;</span>).then(<span class="function"><span class="params">result</span> =&gt;</span>...) <span class="comment">//升序</span></span><br><span class="line">User.find().sort(<span class="string">&#x27;-age&#x27;</span>).then(<span class="function"><span class="params">result</span> =&gt;</span>...) <span class="comment">//降序                      </span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//skip 跳过多少条数据 limit限制查询数量 返回promise对象</span></span><br><span class="line">User.find().skip(<span class="number">2</span>).limit(<span class="number">2</span>).then(<span class="function"><span class="params">result</span> =&gt;</span>...)  <span class="comment">//跳过前两条 并且只显示两条</span></span><br></pre></td></tr></table></figure>

<p>==删除数据==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除单个 返回第一个匹配到的符合条件数据 返回promise对象</span></span><br><span class="line">Course.findOneAndDelete(&#123;<span class="string">&#x27;查询条件&#x27;</span>&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result))</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除多个 返回 一个对象 &#123;删除了几条数据:ok&#125; 返回promise对象</span></span><br><span class="line">User.deleteMany(&#123;<span class="string">&#x27;查询条件&#x27;</span>&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result))</span><br></pre></td></tr></table></figure>

<p>==更新数据==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新单个   返回promise对象</span></span><br><span class="line">User.updataOne(&#123;<span class="string">&#x27;查询条件&#x27;</span>&#125;,&#123;<span class="string">&#x27;要修改的值&#x27;</span>&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(r))</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新多个</span></span><br><span class="line">User.updataMany(&#123;<span class="string">&#x27;查询条件&#x27;</span>&#125;，&#123;<span class="string">&#x27;要修改的值&#x27;</span>&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log())</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="mongoose验证"><a href="#mongoose验证" class="headerlink" title="mongoose验证"></a>mongoose验证</h3><p>在创建集合规则时，可以设置当前字段的验证规则，验证失败就输入插入失败</p>
<ul>
<li>required：true 必传字段</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> Post = mongoose.model(<span class="string">&#x27;Post&#x27;</span>,postSchema);</span><br><span class="line">Post.create(&#123; &#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> <span class="built_in">console</span>.log(result)) <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Required: [true, ‘请传入文章标题’]</li>
<li>Minlength: [2, ‘文章长度不能小于2’]</li>
<li>maxlength: [5, ‘文章长度最大不能’]</li>
<li>trim：true</li>
<li>min: 2  数值最小为2</li>
<li>max: 100 数值最大为100</li>
<li>type：Date. 事件类型</li>
<li>default: Date.now. 默认值</li>
<li>enum: [‘a’,’b’,’c’].    列举出当前字段可以传的一些值. 里面有两个属性 value和message</li>
<li>validate: 自定义验证器</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">author: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">validate</span>: &#123;</span><br><span class="line">    <span class="attr">validator</span>: <span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//返回布尔值</span></span><br><span class="line">      <span class="comment">// v 要验证的值</span></span><br><span class="line">      <span class="keyword">return</span> v &amp;&amp; v.length &gt; <span class="number">4</span></span><br><span class="line">    &#125;,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;传入的值不符合验证规则&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==拿错误信息==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//获取错误信息对象</span></span><br><span class="line">  <span class="keyword">const</span> err = error.errors;</span><br><span class="line">  <span class="comment">//循环错误信息对象</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> attr <span class="keyword">in</span> err) &#123;</span><br><span class="line">    <span class="comment">//将错误信息打印到控制台</span></span><br><span class="line">    <span class="built_in">console</span>.log(err[attr][<span class="string">&#x27;message&#x27;</span>])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="表关联"><a href="#表关联" class="headerlink" title="表关联"></a>表关联</h3><p> 通常<font color=red>不同表的数据之间是有关系的，</font>例如文章信息和用户信息存储在不同的集合中，但文章是某个用户发表的，要查询文章的所有信息包括发表用户，就需要用到表关联。</p>
<ul>
<li>使用id对表进行关联</li>
<li>使用populate方法进行关联表查询</li>
</ul>
<p>==表关联实现==</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户表</span></span><br><span class="line"><span class="keyword">const</span> User = mongoose.model(<span class="string">&#x27;User&#x27;</span>,<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  <span class="attr">name</span>:&#123;<span class="attr">type</span>: <span class="built_in">String</span>&#125;));</span><br><span class="line"><span class="comment">//文章表</span></span><br><span class="line"><span class="keyword">const</span> Post = mongoose.model(<span class="string">&#x27;Post&#x27;</span>,<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line"><span class="attr">title</span>: &#123;<span class="attr">type</span>: <span class="built_in">String</span>&#125;,</span><br><span class="line"><span class="comment">//使用ID将文章表和作者表进行关联</span></span><br><span class="line"><span class="attr">author</span>: &#123;<span class="attr">type</span>: mongoose.Schema.Types.ObjectId, <span class="attr">ref</span>: <span class="string">&#x27;User&#x27;</span>&#125;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">//联合查询</span></span><br><span class="line">Post.find()</span><br><span class="line">		.populate(<span class="string">&#x27;author&#x27;</span>)</span><br><span class="line">		.then(<span class="function">(<span class="params">errr,result</span>) =&gt;</span> &#123;<span class="built_in">console</span>.log(result)&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="模版引擎"><a href="#模版引擎" class="headerlink" title="模版引擎"></a>模版引擎</h2><p>模版引擎是Node.js的第三方模块</p>
<p>让开发者以更友好的方式拼接字符串，使项目代码更加清晰、更加易于维护</p>
<h4 id="art-template模版引擎"><a href="#art-template模版引擎" class="headerlink" title="art-template模版引擎"></a>art-template模版引擎</h4><ol>
<li>使用npm下载</li>
<li>使用const template = require(‘art-template’)引入模版引擎</li>
<li>告诉模版引擎要拼接的数据和模版在哪const html = template(‘模版路径’，数据)；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入模版引擎模块</span></span><br><span class="line"><span class="keyword">const</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art=template&#x27;</span>);</span><br><span class="line"><span class="comment">//将特定模版与特定数据进行拼接</span></span><br><span class="line"><span class="keyword">const</span> html = template(<span class="string">&#x27;./view/index.art&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;data.name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">	&lt;sapn&gt;&#123;&#123;data.age&#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="模版语法"><a href="#模版语法" class="headerlink" title="模版语法"></a>模版语法</h4><ul>
<li>art-template同时支持两种模版语法：<font color=red>标准语法</font>和<font color=red>原始语法</font></li>
<li>标准语法可以让模版更容易读写，原始语法具有强大的逻辑处理能力</li>
<li>标准语法： </li>
<li>原始语法：&lt;%= 数据 %&gt;</li>
</ul>
<p>==输出==</p>
<p>将某项数据输出在模版中，标准语法和原始语法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//标准语法</span></span><br><span class="line">&#123;&#123;数据&#125;&#125;</span><br><span class="line"><span class="comment">//原始语法</span></span><br><span class="line">&lt;%= 数据 %&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原文输出  解析标签</span></span><br><span class="line">&#123;&#123;@ 数据 &#125;&#125;</span><br><span class="line">&lt;%- 数据 %&gt;</span><br></pre></td></tr></table></figure>

<p>==条件判断==</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//标准语法</span><br><span class="line">&#123;&#123;if age &gt; 18&#125;&#125;</span><br><span class="line">	年龄大于18</span><br><span class="line">&#123;&#123;else if age &lt;15 &#125;&#125;</span><br><span class="line">	年龄小于15</span><br><span class="line">&#123;&#123;else&#125;&#125;</span><br><span class="line"> 	年龄不符合要求</span><br><span class="line">&#123;&#123;/if&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//原始语法</span><br><span class="line">&lt;%	if(age &gt; 18)&#123; %&gt;</span><br><span class="line">  年龄大于18</span><br><span class="line">&lt;% &#125;	else if(age &lt; 15)&#123; %&gt;</span><br><span class="line">  年龄小于15</span><br><span class="line">&lt;% &#125; else &#123; %&gt;</span><br><span class="line">   年龄不符合要求</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<p>==循环==</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//标准语法</span><br><span class="line">&#123;&#123;each target&#125;&#125;</span><br><span class="line">	&#123;&#123;$index&#125;&#125; &#123;&#123;$value&#125;&#125;</span><br><span class="line">&#123;&#123;/each&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//原始语法</span><br><span class="line">&lt;% for(var i = 0; i&lt;target.length; i++) &#123; %&gt;</span><br><span class="line">	&lt;%= i %&gt;&lt;%= target[i] %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<p>==子模版==</p>
<p>使用子模版可以将网站公共区块(头部、底部)抽离到单独的文件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//标准语法</span></span><br><span class="line">&#123;&#123;include <span class="string">&#x27;./header.art&#x27;</span>&#125;&#125;</span><br><span class="line"><span class="comment">//原始语法</span></span><br><span class="line">&lt;% include(<span class="string">&#x27;./header.art&#x27;</span>) %&gt;</span><br></pre></td></tr></table></figure>

<p>==模版继承==</p>
<p>使用模版集成可以将网站HTML骨架抽离到单独的文件中，其他页面模版可以继承骨架文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&#x27;utf-8&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>HTML骨架模版<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    &#123;&#123;block &#x27;head&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;block &#x27;content&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//index.art 首页模版</span><br><span class="line">&#123;&#123;extend &#x27;./layout.art&#x27;&#125;&#125;</span><br><span class="line">&#123;&#123;block &#x27;head&#x27;&#125;&#125; <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&#x27;stylesheet&#x27;</span> <span class="attr">href</span>=<span class="string">&#x27;custom.css&#x27;</span>&gt;</span> &#123;&#123;/block&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>==模版设置==</p>
<ol>
<li>向模版中导入变量 template.defaults.imports.变量名 = 变量值。处理时间</li>
</ol>
<hr>
<h2 id="Express框架"><a href="#Express框架" class="headerlink" title="Express框架"></a>Express框架</h2><h3 id="Express框架是什么"><a href="#Express框架是什么" class="headerlink" title="Express框架是什么"></a>Express框架是什么</h3><p>Express是一个基于<font color=red>Node平台</font>的<font color=red>web应用开发框架</font>,它提供了一系列的强大特性，帮助你创建各种web应用，我们可以使用 npm install express 命令下载</p>
<hr>
<h3 id="Express特性"><a href="#Express特性" class="headerlink" title="Express特性"></a>Express特性</h3><ul>
<li>提供了方便简洁的路由定义方式</li>
<li>对获取http请求参数进行了简化处理</li>
<li>对模版引擎支持程度高，方便渲染动态HTML页面</li>
<li>提供了中间件机制有效控制HTTP请求</li>
<li>拥有大量第三方中间件对功能进行扩展</li>
</ul>
<hr>
<h3 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h3><p>中间件就是一堆方法，可以接受客户端发来的请求、可以对请求作出响应，也可以将请求继续交给下一个中间件继续处理<img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/%E4%B8%AD%E9%97%B4%E4%BB%B6.png" alt="image-20210902160437524"></p>
<ul>
<li>中间件主要由两部分构成，<font color=red>中间件方法</font>以及<font color=red>请求处理函数</font></li>
<li>中间件方法由Express提供，负责拦截请求，请求处理函数由开发人员提供，负责处理请求</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;请求路径&#x27;</span>,<span class="string">&#x27;处理函数&#x27;</span>)  <span class="comment">//接收并处理get请求</span></span><br><span class="line">app.post(<span class="string">&#x27;请求路径&#x27;</span>,<span class="string">&#x27;处理函数&#x27;</span>) <span class="comment">//接收并处理post请求</span></span><br></pre></td></tr></table></figure>

<ul>
<li>可以针对同一个请求设置多个中间件，对同一个请求进行多次处理</li>
<li>默认情况下，请求从上到下一次匹配中间件，一旦匹配成功，终止匹配</li>
<li>可以调用next方法将请求的控制权交给下一个中间件，知道遇到结束请求的中间件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/request&#x27;</span>,<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  req.name = <span class="string">&#x27;zhangsan&#x27;</span>;</span><br><span class="line">  next();</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">&#x27;/request&#x27;</span>,<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.send(req.name);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="app-use中间件用法"><a href="#app-use中间件用法" class="headerlink" title="app.use中间件用法"></a>app.use中间件用法</h4><p>app.use匹配所有的请求方式，可以直接传入请求处理函数，代表接收所有的请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.url);</span><br><span class="line">  next();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>app.use第一个参数页可以传入请求地址，代表不论什么请求方式，只要是这个请求地址就接收这个请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">&#x27;/admin&#x27;</span>,<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.url);</span><br><span class="line">  next();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="中间件应用"><a href="#中间件应用" class="headerlink" title="中间件应用"></a>中间件应用</h4><ol>
<li>路由保护，客户端在访问需要登录的页面时，可以先使用中间件判断用户登录状态，用户如果未登录，则拦截请求，直接响应，禁止用户进入需要登录的页面</li>
<li>网站维护公告，在所有路由的最上面定义接收所有请求的中间件，直接为客户端作出响应</li>
<li>定义404页面</li>
</ol>
<hr>
<h4 id="错误处理中间件"><a href="#错误处理中间件" class="headerlink" title="错误处理中间件"></a>错误处理中间件</h4><p>在程序执行的过程中，不可避免的会出现一些无法预料的错误，比如文件读取失败，数据库连接失败。</p>
<p>错误处理中间件是一个集中处理错误的地方。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;程序发生未知错误&#x27;</span>); <span class="comment">//因为这里是同步代码所以可以直接触发下面的错误处理中间件</span></span><br><span class="line">    <span class="comment">// res.send(&#x27;程序正常执行&#x27;);        </span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.status(<span class="number">500</span>).send(err.message);   </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>当程序出错时(异步API)，调用next()方法，并且将错误信息通过参数的形式传递给next()方法，即可触发错误处理中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/index&#x27;</span>,<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  fs.readFile(<span class="string">&#x27;xxxx.txt&#x27;</span>,<span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) &#123;          </span><br><span class="line">      next(err);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.status(<span class="number">500</span>).send(err.message);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="捕获错误"><a href="#捕获错误" class="headerlink" title="捕获错误"></a>捕获错误</h4><p>在node.js中，异步API的错误信息都是通过回调函数获取的，支持promise对象的异步API发生错误可以直接通过catch方法捕获。</p>
<p>异步函数执行如果发生错误要如何捕获错误呢？</p>
<p>try catch 可以捕获异步函数以及其他同步代码在执行过程中发生的错误，但是不能捕获其他类型API发生的错误</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> User.find(&#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>&#125;)</span><br><span class="line">  &#125;<span class="keyword">catch</span>(ex) &#123;</span><br><span class="line">    next(ex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="构建模块化路由"><a href="#构建模块化路由" class="headerlink" title="构建模块化路由"></a>构建模块化路由</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> home = express.Route();</span><br><span class="line"><span class="comment">//将路由和请求路径进行匹配</span></span><br><span class="line">app.use(<span class="string">&#x27;/home&#x27;</span>,home);</span><br><span class="line"><span class="comment">//在hoome路由下继续创建路由 二级路由</span></span><br><span class="line">home.get(<span class="string">&#x27;/index&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// /home/index</span></span><br><span class="line">  res.send(<span class="string">&#x27;欢迎来到博客展示页面&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="GET参数的获取"><a href="#GET参数的获取" class="headerlink" title="GET参数的获取"></a>GET参数的获取</h4><p>Express框架中使用<font color=red>req.query</font>即可获取GET参数，框架内部会将GET请求参数转换为对象并返回</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收地址栏中问号后面的参数</span></span><br><span class="line"><span class="comment">//例如：http://localhost:3000/?name=zhangsan&amp;age=30</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.qurey); <span class="comment">// &#123;&#x27;name&#x27;: &#x27;zhangsan&#x27;, &#x27;age&#x27;: 20&#125;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="POST参数的获取"><a href="#POST参数的获取" class="headerlink" title="POST参数的获取"></a>POST参数的获取</h4><p>Express中接收post请求参数需要借助第三方包 body-parser</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="comment">//创建网站服务器</span></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ues方法拦截所有请求</span></span><br><span class="line"><span class="comment">//extended: false 方法内部使用queryString模块处理请求参数的格式</span></span><br><span class="line"><span class="comment">//extended: true 方法内部使用第三方模块qs处理请求参数的格式</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">false</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">//请求接收</span></span><br><span class="line">app.post(<span class="string">&#x27;/add&#x27;</span>,<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//接收请求参数</span></span><br><span class="line">    res.send(req.body);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Express路由参数"><a href="#Express路由参数" class="headerlink" title="Express路由参数"></a>Express路由参数</h4><p>另外一种传递以及获取参数的方式 ：是占位符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/index/:id/:name/:age&#x27;</span>, <span class="function">(<span class="params">req, res,</span>) =&gt;</span> &#123;</span><br><span class="line">  res.send(req.params);  <span class="comment">// &#123;id: 1, name: &#x27;zhangsan&#x27;, age: 20&#125;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="attr">localhost</span>:<span class="number">3000</span>/index/<span class="number">1</span>/zhangsan/<span class="number">20</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="静态资源的处理"><a href="#静态资源的处理" class="headerlink" title="静态资源的处理"></a>静态资源的处理</h4><p>通过Express内置的<font color=red>express.static</font>&gt;可以方便的托管静态文件，例如img、css、js文件等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">&#x27;public&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>现在，public目录下面的文件就可以访问了</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:3000/images/kitten.jpg">http://localhost:3000/images/kitten.jpg</a> </li>
<li><a target="_blank" rel="noopener" href="http://localhost:3000/css/style.css">http://localhost:3000/css/style.css</a> </li>
<li><a href="http://localhost:3000js/app.js">http://localhost:3000js/app.js</a></li>
<li><a target="_blank" rel="noopener" href="http://localhost:3000/images/bg.png">http://localhost:3000/images/bg.png</a> </li>
<li><a target="_blank" rel="noopener" href="http://localhost:3000/hello.html">http://localhost:3000/hello.html</a></li>
</ul>
<hr>
<h4 id="模版引擎-1"><a href="#模版引擎-1" class="headerlink" title="模版引擎"></a>模版引擎</h4><ul>
<li>为了使art-template模版更好的和Express框架配合，模版引擎官方在原art-templata模版引擎的基础上封装了express-art-template</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当渲染后缀为art的模版时 使用express-art-template</span></span><br><span class="line">app.engine(<span class="string">&#x27;art&#x27;</span>,<span class="built_in">require</span>(<span class="string">&#x27;express-art-template&#x27;</span>));</span><br><span class="line"><span class="comment">//设置模版存放目录</span></span><br><span class="line">app.set(<span class="string">&#x27;views&#x27;</span>, path.join(__dirname,<span class="string">&#x27;views&#x27;</span>));</span><br><span class="line"><span class="comment">//渲染模版时不写后缀 默认拼接art后缀</span></span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;art&#x27;</span>);</span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//渲染模版</span></span><br><span class="line">  res.render(<span class="string">&#x27;index&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;sdfsdfsdfd&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//1. render方法会帮我们拼接模版后缀</span></span><br><span class="line">  <span class="comment">//2. render方法会帮我们告诉art-template哪一个模版和哪一个数据拼接</span></span><br><span class="line">  <span class="comment">//3. 返回拼接好的结果并直接响应给客户端</span></span><br><span class="line">  <span class="comment">//4. 第二个参数是为模版准备的数据</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>app.locals对象</p>
<p>将变量设置到app.locals对象下面，这个数据在所有的模版中都可以获取到</p>
</li>
</ul>
<hr>
<h4 id="密码加密bcrypt"><a href="#密码加密bcrypt" class="headerlink" title="密码加密bcrypt"></a>密码加密bcrypt</h4><p>哈希加密是单程加密方式： 1234 =&gt; abcd</p>
<p>在加密的密码中加入随机字符串可以增加密码被破解的难度</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入bcrypt模块</span></span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcrypr&#x27;</span>);</span><br><span class="line"><span class="comment">//生成随机字符串 gen =&gt; generate 生成salt盐</span></span><br><span class="line"><span class="keyword">let</span> salt = awiait bcrypt.genSalt(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//使用随机字符串对密码进行加密</span></span><br><span class="line"><span class="keyword">let</span> pass = <span class="keyword">await</span> bcrypt.hash(<span class="string">&#x27;明文密码&#x27;</span>, salt);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//密码比对</span></span><br><span class="line"><span class="keyword">let</span> isEqual = <span class="keyword">await</span> bcrypt.compare(<span class="string">&#x27;明文密码&#x27;</span>，<span class="string">&#x27;加密密码&#x27;</span>)；</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="cookie与session"><a href="#cookie与session" class="headerlink" title="cookie与session"></a>cookie与session</h2><p>==cookie==：浏览器在电脑硬盘中开辟的一块空间，主要供服务器端存储数据</p>
<ul>
<li>cookie中的数据是以域名的形式进行区分的</li>
<li>cookie中的数据是有过期时间的，超过时间数据就会被浏览器自动删除(关闭浏览器也会删除)</li>
<li>cookie中的数据会随着请求被自动发送到服务器端</li>
</ul>
<p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/cookie.png" alt="image-20210905093844710"></p>
<p>==session==：实际上就是一个对象，存储在服务器端的内存中，在session对象中也可以存储多条数据，每一条数据都有一个sessionid作为唯一标识</p>
<p>==cookie与session实现登录==</p>
<p><img src="/Users/stefan/Desktop/Typora%E5%9B%BE%E7%89%87/JS%E9%AB%98%E7%BA%A7/cookie%E4%B8%8Esession.png" alt="image-20210905094345513"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>);</span><br><span class="line">app.use(session(&#123;<span class="attr">secret</span>: <span class="string">&#x27;secret key&#x27;</span>&#125;));</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="项目包含的知识点"><a href="#项目包含的知识点" class="headerlink" title="项目包含的知识点"></a>项目包含的知识点</h2><h3 id="数据分页"><a href="#数据分页" class="headerlink" title="数据分页"></a>数据分页</h3><p>当数据库中的数据非常多时，数据需要分批次显示，这时就需要用到数据分页功能</p>
<p>分页功能核心要素：</p>
<ol>
<li>当前页，用户通过点击上一页或者页码产生，客户端通过get参数传递到服务器</li>
<li>总页数，根据总页数判断当前页是否为最后一页，根据判断结果做响应操作</li>
</ol>
<table>
<thead>
<tr>
<th>中数据条数</th>
<th>每页显示数据条数</th>
<th>总页数</th>
</tr>
</thead>
<tbody><tr>
<td>50</td>
<td>5</td>
<td>10</td>
</tr>
<tr>
<td>52</td>
<td>5</td>
<td>11</td>
</tr>
</tbody></table>
<p>总页数：Math.ceil(总数据条数/每页显示数据条数)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">limit(<span class="number">2</span>) <span class="comment">//limit限制查询数量 传入每页显示的数据数量</span></span><br><span class="line">skip(<span class="number">1</span>) <span class="comment">//skip跳过多少条数据 传入显示数据的开始位置</span></span><br></pre></td></tr></table></figure>

<p> 数据开始查询位置= （当前页-1）x 每页显示的数据条数</p>
<hr>
<h3 id="formodable第三方包"><a href="#formodable第三方包" class="headerlink" title="formodable第三方包"></a>formodable第三方包</h3><p>作用：解析表单，支持get请求参数，post请求参数、文件上传</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入formidable模块</span></span><br><span class="line"><span class="keyword">const</span> formidable = <span class="built_in">require</span>(<span class="string">&#x27;formidable&#x27;</span>);</span><br><span class="line"><span class="comment">//创建表单解析对象</span></span><br><span class="line"><span class="keyword">const</span> form = <span class="keyword">new</span> formidable.IncomingForm();</span><br><span class="line"><span class="comment">//设置文件上传路径</span></span><br><span class="line">form.uploadDir = <span class="string">&#x27;/my/dir&#x27;</span>;</span><br><span class="line"><span class="comment">//是否保留表单上传文件的扩展名</span></span><br><span class="line">form.keepExtensions = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//对表单进行解析</span></span><br><span class="line">form.parse(req, <span class="function">(<span class="params">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//fields 存储普通请求参数</span></span><br><span class="line">  <span class="comment">//files 存储上传的文件信息</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="数据分页mongoose-sex-page"><a href="#数据分页mongoose-sex-page" class="headerlink" title="数据分页mongoose-sex-page"></a>数据分页mongoose-sex-page</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pagination = <span class="built_in">require</span>(<span class="string">&#x27;mongoose-sex-page&#x27;</span>);</span><br><span class="line">pagination(集合构造函数).page(<span class="number">1</span>).size(<span class="number">20</span>).display(<span class="number">8</span>).exec();</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">ercury</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2021/08/27/JavaScript%E9%AB%98%E7%BA%A7/">http://example.com/2021/08/27/JavaScript%E9%AB%98%E7%BA%A7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JS/">JS</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/26/hello-world/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hello World</div></div></a></div><div class="next-post pull-right"><a href="/2021/07/31/CSS/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CSS</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/07/07/JavaScript%E5%9F%BA%E7%A1%80/" title="JS基础"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-07</div><div class="title">JS基础</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/author.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ercury</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ercury"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ES6%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.</span> <span class="toc-text">ES6中的类和对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.</span> <span class="toc-text">创建类和对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BBconstructor%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.</span> <span class="toc-text">类constructor构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E6%B7%BB%E5%8A%A0%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">类添加方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">1.4.</span> <span class="toc-text">类的继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-amp-%E5%8E%9F%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">构造函数&amp;原型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">2.2.</span> <span class="toc-text">构造函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%88%90%E5%91%98-amp-%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="toc-number">2.2.2.</span> <span class="toc-text">实例成员&amp;静态成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.2.3.</span> <span class="toc-text">构造函数的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8Bprototype"><span class="toc-number">2.2.4.</span> <span class="toc-text">构造函数原型prototype</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B-proto"><span class="toc-number">2.2.5.</span> <span class="toc-text">对象原型__proto__</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#constructor%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">2.2.6.</span> <span class="toc-text">constructor构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-%E5%AE%9E%E4%BE%8B-%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB"><span class="toc-number">2.2.7.</span> <span class="toc-text">构造函数,实例,原型对象关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">2.2.8.</span> <span class="toc-text">原型链</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JS%E6%88%90%E5%91%98%E6%9F%A5%E6%89%BE%E6%9C%BA%E5%88%B6-%E8%A7%84%E5%88%99"><span class="toc-number">2.2.9.</span> <span class="toc-text">JS成员查找机制(规则)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1prototype%E7%9A%84this%E6%8C%87%E5%90%91"><span class="toc-number">2.2.10.</span> <span class="toc-text">原型对象prototype的this指向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">2.2.11.</span> <span class="toc-text">原型对象的应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">3.</span> <span class="toc-text">继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#call"><span class="toc-number">3.1.</span> <span class="toc-text">call()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%9F%E7%94%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%BB%A7%E6%89%BF%E7%88%B6%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">3.2.</span> <span class="toc-text">借用构造函数继承父类型属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%9F%E5%8A%A9%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E7%BB%A7%E6%89%BF%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">借助原型对象继承方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES5%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">ES5新增方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">数组方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">字符串方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">4.3.</span> <span class="toc-text">对象方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES5%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6"><span class="toc-number">5.</span> <span class="toc-text">ES5函数进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.</span> <span class="toc-text">函数的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8"><span class="toc-number">5.2.</span> <span class="toc-text">函数的调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%86%85this%E7%9A%84%E6%8C%87%E5%90%91"><span class="toc-number">5.3.</span> <span class="toc-text">函数内this的指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B9%E5%8F%98%E5%87%BD%E6%95%B0%E5%86%85%E9%83%A8this%E6%8C%87%E5%90%91"><span class="toc-number">5.4.</span> <span class="toc-text">改变函数内部this指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.5.</span> <span class="toc-text">严格模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.5.1.</span> <span class="toc-text">什么是严格模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.5.2.</span> <span class="toc-text">开启严格模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F%E4%B8%AD%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-number">5.5.3.</span> <span class="toc-text">严格模式中的变化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0"><span class="toc-number">5.6.</span> <span class="toc-text">高阶函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85"><span class="toc-number">5.7.</span> <span class="toc-text">闭包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-number">5.8.</span> <span class="toc-text">递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">5.9.</span> <span class="toc-text">深拷贝与浅拷贝</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">6.0.1.</span> <span class="toc-text">什么是正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">6.0.2.</span> <span class="toc-text">正则的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">6.0.3.</span> <span class="toc-text">创建正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%96%B9%E6%B3%95"><span class="toc-number">6.0.4.</span> <span class="toc-text">测试正则表达式方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">6.0.5.</span> <span class="toc-text">正则表达式的组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="toc-number">6.0.6.</span> <span class="toc-text">特殊字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%AC%E5%8F%B7%E6%80%BB%E7%BB%93"><span class="toc-number">6.0.7.</span> <span class="toc-text">括号总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E5%AE%9A%E4%B9%89%E7%B1%BB"><span class="toc-number">6.0.8.</span> <span class="toc-text">预定义类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%82%E6%95%B0"><span class="toc-number">6.0.9.</span> <span class="toc-text">正则表达式参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace%E6%9B%BF%E6%8D%A2"><span class="toc-number">6.0.10.</span> <span class="toc-text">replace替换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES6"><span class="toc-number">7.</span> <span class="toc-text">ES6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6%E6%96%B0%E5%A2%9E%E8%AF%AD%E6%B3%95"><span class="toc-number">7.1.</span> <span class="toc-text">ES6新增语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#let"><span class="toc-number">7.1.1.</span> <span class="toc-text">let</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#const"><span class="toc-number">7.1.2.</span> <span class="toc-text">const</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#let%E3%80%81const%E3%80%81var"><span class="toc-number">7.1.3.</span> <span class="toc-text">let、const、var</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="toc-number">7.1.4.</span> <span class="toc-text">解构赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">7.1.5.</span> <span class="toc-text">箭头函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0"><span class="toc-number">7.1.6.</span> <span class="toc-text">剩余参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E6%89%A9%E5%B1%95"><span class="toc-number">7.2.</span> <span class="toc-text">内置对象扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Array%E7%9A%84%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-number">7.2.1.</span> <span class="toc-text">Array的扩展方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#String%E7%9A%84%E6%89%A9%E5%B1%95%E6%96%B9%E6%B3%95"><span class="toc-number">7.2.2.</span> <span class="toc-text">String的扩展方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">7.2.3.</span> <span class="toc-text">Set数据结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node"><span class="toc-number">8.</span> <span class="toc-text">Node</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Node%E7%AE%80%E4%BB%8B"><span class="toc-number">8.1.</span> <span class="toc-text">Node简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80"><span class="toc-number">8.1.1.</span> <span class="toc-text">为什么要学习服务端开发基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A6%81%E5%81%9A%E5%93%AA%E4%BA%9B%E4%BA%8B%E6%83%85"><span class="toc-number">8.1.2.</span> <span class="toc-text">服务器端开发要做哪些事情</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9Node"><span class="toc-number">8.1.3.</span> <span class="toc-text">为什么选择Node</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">8.1.4.</span> <span class="toc-text">Node是什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-js%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-number">8.1.5.</span> <span class="toc-text">Node.js运行环境安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PATH%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">8.1.6.</span> <span class="toc-text">PATH环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-js%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">8.1.7.</span> <span class="toc-text">Node.js的组成</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Node-js%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-number">8.2.</span> <span class="toc-text">Node.js模块化开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript%E5%BC%80%E5%8F%91%E5%BC%8A%E7%AB%AF"><span class="toc-number">8.2.1.</span> <span class="toc-text">JavaScript开发弊端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-js%E4%B8%AD%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="toc-number">8.2.2.</span> <span class="toc-text">Node.js中模块化开发规范</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97"><span class="toc-number">8.3.</span> <span class="toc-text">系统模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97"><span class="toc-number">8.3.1.</span> <span class="toc-text">什么是系统模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97fs%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">8.3.2.</span> <span class="toc-text">系统模块fs文件操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97path%E8%B7%AF%E5%BE%84%E6%93%8D%E4%BD%9C"><span class="toc-number">8.3.3.</span> <span class="toc-text">系统模块path路径操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97"><span class="toc-number">8.4.</span> <span class="toc-text">第三方模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97"><span class="toc-number">8.4.1.</span> <span class="toc-text">什么是第三方模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97%E6%9C%89%E4%B8%A4%E7%A7%8D%E5%AD%98%E5%9C%A8%E5%BD%A2%E5%BC%8F"><span class="toc-number">8.4.2.</span> <span class="toc-text">第三方模块有两种存在形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97"><span class="toc-number">8.4.3.</span> <span class="toc-text">获取第三方模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97nodemon"><span class="toc-number">8.4.4.</span> <span class="toc-text">第三方模块nodemon</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97nrm"><span class="toc-number">8.4.5.</span> <span class="toc-text">第三方模块nrm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97Gulp"><span class="toc-number">8.4.6.</span> <span class="toc-text">第三方模块Gulp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#node-mondules%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">8.4.7.</span> <span class="toc-text">node_mondules文件夹的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#package-json%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">8.4.8.</span> <span class="toc-text">package.json文件的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Package-lock-json%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">8.4.9.</span> <span class="toc-text">Package-lock.json文件的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96"><span class="toc-number">8.4.10.</span> <span class="toc-text">项目依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%BE%9D%E8%B5%96"><span class="toc-number">8.4.11.</span> <span class="toc-text">开发依赖</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Node-js%E4%B8%AD%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6"><span class="toc-number">8.5.</span> <span class="toc-text">Node.js中模块的加载机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%93%E6%A8%A1%E5%9D%97%E6%8B%A5%E6%9C%89%E8%B7%AF%E5%BE%84%E5%BD%93%E6%B2%A1%E6%9C%89%E5%90%8E%E7%BC%80%E6%97%B6"><span class="toc-number">8.5.1.</span> <span class="toc-text">当模块拥有路径当没有后缀时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%93%E6%A8%A1%E5%9D%97%E6%B2%A1%E6%9C%89%E8%B7%AF%E5%BE%84%E4%B8%94%E6%B2%A1%E6%9C%89%E5%90%8E%E7%BC%80"><span class="toc-number">8.5.2.</span> <span class="toc-text">当模块没有路径且没有后缀</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-number">8.6.</span> <span class="toc-text">服务器基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Node%E7%BD%91%E7%AB%99%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.6.1.</span> <span class="toc-text">Node网站服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80"><span class="toc-number">8.6.2.</span> <span class="toc-text">IP地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D"><span class="toc-number">8.6.3.</span> <span class="toc-text">域名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3"><span class="toc-number">8.6.4.</span> <span class="toc-text">端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#URL"><span class="toc-number">8.6.5.</span> <span class="toc-text">URL</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAweb%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.7.</span> <span class="toc-text">创建web服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.8.</span> <span class="toc-text">HTTP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%A5%E6%96%87"><span class="toc-number">8.8.1.</span> <span class="toc-text">报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">8.8.2.</span> <span class="toc-text">请求报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">8.8.3.</span> <span class="toc-text">响应报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GET%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">8.8.4.</span> <span class="toc-text">GET请求参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POST%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">8.8.5.</span> <span class="toc-text">POST请求参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">8.8.6.</span> <span class="toc-text">路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">8.8.7.</span> <span class="toc-text">静态资源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">8.8.8.</span> <span class="toc-text">动态资源</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Node-js%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">8.9.</span> <span class="toc-text">Node.js异步编程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5API%EF%BC%8C%E5%BC%82%E6%AD%A5API"><span class="toc-number">8.9.1.</span> <span class="toc-text">同步API，异步API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-js%E4%B8%AD%E7%9A%84%E5%BC%82%E6%AD%A5API"><span class="toc-number">8.9.2.</span> <span class="toc-text">Node.js中的异步API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Promise"><span class="toc-number">8.9.3.</span> <span class="toc-text">Promise</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0-ES7"><span class="toc-number">8.9.4.</span> <span class="toc-text">异步函数(ES7)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Node-js%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1global"><span class="toc-number">8.10.</span> <span class="toc-text">Node.js全局对象global</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">9.</span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">9.1.</span> <span class="toc-text">为什么要使用数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">9.2.</span> <span class="toc-text">什么是数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">9.3.</span> <span class="toc-text">数据库相关概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mongoose%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85"><span class="toc-number">9.4.</span> <span class="toc-text">Mongoose第三方包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">9.5.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">9.6.</span> <span class="toc-text">数据库增删改查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mongoose%E9%AA%8C%E8%AF%81"><span class="toc-number">9.7.</span> <span class="toc-text">mongoose验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%85%B3%E8%81%94"><span class="toc-number">9.8.</span> <span class="toc-text">表关联</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E"><span class="toc-number">10.</span> <span class="toc-text">模版引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#art-template%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E"><span class="toc-number">10.0.1.</span> <span class="toc-text">art-template模版引擎</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E8%AF%AD%E6%B3%95"><span class="toc-number">10.0.2.</span> <span class="toc-text">模版语法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Express%E6%A1%86%E6%9E%B6"><span class="toc-number">11.</span> <span class="toc-text">Express框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Express%E6%A1%86%E6%9E%B6%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">11.1.</span> <span class="toc-text">Express框架是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Express%E7%89%B9%E6%80%A7"><span class="toc-number">11.2.</span> <span class="toc-text">Express特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">11.3.</span> <span class="toc-text">中间件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-use%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%94%A8%E6%B3%95"><span class="toc-number">11.3.1.</span> <span class="toc-text">app.use中间件用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%BA%94%E7%94%A8"><span class="toc-number">11.3.2.</span> <span class="toc-text">中间件应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">11.3.3.</span> <span class="toc-text">错误处理中间件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E9%94%99%E8%AF%AF"><span class="toc-number">11.3.4.</span> <span class="toc-text">捕获错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E6%A8%A1%E5%9D%97%E5%8C%96%E8%B7%AF%E7%94%B1"><span class="toc-number">11.3.5.</span> <span class="toc-text">构建模块化路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GET%E5%8F%82%E6%95%B0%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-number">11.3.6.</span> <span class="toc-text">GET参数的获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POST%E5%8F%82%E6%95%B0%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-number">11.3.7.</span> <span class="toc-text">POST参数的获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Express%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="toc-number">11.3.8.</span> <span class="toc-text">Express路由参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">11.3.9.</span> <span class="toc-text">静态资源的处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E-1"><span class="toc-number">11.3.10.</span> <span class="toc-text">模版引擎</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86bcrypt"><span class="toc-number">11.3.11.</span> <span class="toc-text">密码加密bcrypt</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie%E4%B8%8Esession"><span class="toc-number">12.</span> <span class="toc-text">cookie与session</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%8C%85%E5%90%AB%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">13.</span> <span class="toc-text">项目包含的知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E9%A1%B5"><span class="toc-number">13.1.</span> <span class="toc-text">数据分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#formodable%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85"><span class="toc-number">13.2.</span> <span class="toc-text">formodable第三方包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E9%A1%B5mongoose-sex-page"><span class="toc-number">13.3.</span> <span class="toc-text">数据分页mongoose-sex-page</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/01/30/vscode%E6%8F%92%E4%BB%B6%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0/" title="vscode插件版本更新"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vscode插件版本更新"/></a><div class="content"><a class="title" href="/2022/01/30/vscode%E6%8F%92%E4%BB%B6%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0/" title="vscode插件版本更新">vscode插件版本更新</a><time datetime="2022-01-29T16:05:00.489Z" title="发表于 2022-01-30 00:05:00">2022-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/26/hello-world/" title="Hello World"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2022/01/26/hello-world/" title="Hello World">Hello World</a><time datetime="2022-01-26T15:24:01.633Z" title="发表于 2022-01-26 23:24:01">2022-01-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/27/JavaScript%E9%AB%98%E7%BA%A7/" title="JS高级"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JS高级"/></a><div class="content"><a class="title" href="/2021/08/27/JavaScript%E9%AB%98%E7%BA%A7/" title="JS高级">JS高级</a><time datetime="2021-08-26T17:23:14.019Z" title="发表于 2021-08-27 01:23:14">2021-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/31/CSS/" title="CSS"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSS"/></a><div class="content"><a class="title" href="/2021/07/31/CSS/" title="CSS">CSS</a><time datetime="2021-07-30T18:23:53.000Z" title="发表于 2021-07-31 02:23:53">2021-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/09/Vue-cli/" title="Vue-cli应用"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue-cli应用"/></a><div class="content"><a class="title" href="/2021/07/09/Vue-cli/" title="Vue-cli应用">Vue-cli应用</a><time datetime="2021-07-09T13:08:22.000Z" title="发表于 2021-07-09 21:08:22">2021-07-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By ercury</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>